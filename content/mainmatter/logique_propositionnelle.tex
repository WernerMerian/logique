\chapter{Logique propositionnelle}
\label{chp.logprop}

\minitoc

\lettrine{P}{our} commencer l'étude de la logique, nous allons étudier sa forme
la plus élémentaire : la logique propositionnelle. Lorsque l'on écrit une phrase
mathématique, disons par exemple
\[\forall n \in \mathbb N, (\exists m \in \mathbb N, n = 2\times m) \text{ or }
(\exists m \in \mathbb N, n = 2 \times m + 1)\]
on peut séparer plusieurs parties :
\begin{itemize}
\item les quantificateurs.
\item les connecteurs logiques, comme \og et\fg{}, \og ou\fg{} ou \og non\fg{}.
\item les propositions atomiques, comme $n = 2 \times m$ ci-dessus.
\end{itemize}

La logique propositionnelle est une simplification de cette grammaire, dans
laquelle les propositions atomiques sont remplacées par de simple variables,
pouvant prendre la valeur $\mathrm{Vrai}$ ou $\mathrm{Faux}$, et où l'on
supprime les quantificateurs. L'étude de la logique propositionnelle, beaucoup
plus simple que le calcul des prédicats, permet de donner une première idée des
propriétés qui nous intéressent dans la logique.

\section{Définitions}

Fixons tout d'abord un ensemble $\Var$ dénombrable de variables
propositionnelles. Nous allons construire l'ensemble des propositions comme un
ensemble inductif, en ajoutant les connecteurs logiques usuels.

\begin{definition}[Propositions]
  On définit l'ensemble $\mathrm{Prop}$ des propositions du calcul
  propositionnel par la grammaire suivante :
  \[P,Q ::= x \mid \top \mid \bot \mid \lnot P \mid P \lor Q \mid P \land Q
  \mid P \to Q\]
  où $x\in \Var$ est une variable propositionnelle.
\end{definition}

Le sens des différents symboles est le suivant :
\begin{itemize}
\item $\top$ représente la proposition vraie.
\item $\bot$ représente la proposition fausse.
\item $\lnot$ représente la négation logique.
\item $\lor$ représente la disjonction logique.
\item $\land$ représente la conjonction logique.
\item $\to$ représente l'implication logique.
\end{itemize}

Par convention, nous donnons l'ordre de priorité (du plus prioritaire au moins
prioritaire) suivant : $\lnot > \land > \lor > \to$. Cette convention évite ainsi
d'écrire certaines parenthèses. De plus, comme $\land$ et $\lor$ seront montrés
associatifs, nous ne parenthèserons pas $P\lor Q\lor R$ par exemple. Pour $\to$,
nous associons à droite, c'est-à-dire que $P\to Q\to R$ signifie
$P\to (Q \to R)$. Par exemple la proposition
\[(P \to Q)\land (R \to Q) \to P\lor R \to Q\] doit se lire
\[((P \to Q) \land (R \to Q)) \to ((P \lor R) \to Q)\]

L'objectif d'une proposition est bien sûr de lui attribuer une valeur de vérité.
Evidemment, la valeur de vérite d'une proposition dépend de celle des variables.
Par exemple, $(x\lor \lnot y) \land z$ n'aura pas la même valeur de vérité
suivant si $z$ est vrai ou faux.

Pour manipuler les variables d'une propositions, il est important de définir
l'ensemble des variables impliquées dans la construction d'une proposition.

\begin{definition}[Variables libres]
  Par induction sur la structure inductive de $\Prop$, on définit pour
  $P$ l'ensemble $\VL(P)$ des variables libres de $P$ :
  \begin{itemize}
  \item si $P = x$ et $x\in\Var$, alors $\VL(P) = \{x\}$.
  \item si $P = \lnot Q$ alors $\VL(P) = \VL(Q)$.
  \item si $P = Q \lor R$ ou $P = Q \land R$ ou $P = Q \to R$,
    alors $\VL(P) = \VL(Q)\cup\VL(R)$.
  \end{itemize}
\end{definition}

\begin{remark}
  La dénomination de variable \og libre\fg{} prendra son sens dans le prochain
  chapitre. L'intérêt de définir $\VL$ et non juste l'ensemble des variables est
  d'ignorer les variables muettes, mais dans le calcul propositionnel aucune
  variable n'est muette.
\end{remark}

Une attribution de valeurs de vérité aux variables propositionnelles est appelée
un environnement. On utilisera l'ensemble $\{0,1\}$ pour signifier
$\{\mathrm{Faux},\mathrm{Vrai}\}$.

\begin{definition}[Environnement]
  Un environnement est une fonction partielle $\rho : \Var \to \{0,1\}$
  dont le domaine (l'ensemble des valeurs $x\in \Var$ sur lesquelles
  $\rho$ est défini) est fini.
\end{definition}

Un environnement permet ensuite de définir la notion de valuation, qui est la
valeur de vérité d'une proposition dans un environnement donné. On considère

\begin{definition}[Valuation]
  Soit $\rho$ un environnement. On définit par induction sur $\mathrm{Prop}$
  la fonction partielle $\Val_\rho : \Prop \to \{0,1\}$ :
  \begin{itemize}
  \item pour $x\in \Var$, si $x\in \dom(\rho)$ alors
    $\Val_\rho (x)= \rho(x)$, si $x\notin \dom(\rho)$ alors
    $\Val_\rho (x)$ n'est pas défini.
  \item soit $P$ une proposition, alors
    $\Val_\rho(\lnot P) = 1 - \Val_\rho(P)$.
  \item soient $P$ et $Q$ deux propositions, alors
    $\Val_\rho(P\lor Q)=\max(\Val_\rho(P),\Val_\rho(Q))$
  \item soient $P$ et $Q$ deux propositions, alors
    $\Val_\rho(P\land Q)=\min(\Val_\rho(P),\Val_\rho(Q))$
  \item soient $P$ et $Q$ deux propositions, alors
    $\Val_\rho(P\to Q) = \max(1 - \Val_\rho(P),\Val_\rho(Q))$
  \end{itemize}
\end{definition}

\begin{exercise}
  Soit $\rho$ un environnement et $P$ une proposition, montrer que
  $\Val_\rho(P)$ est définie si et seulement si
  $\VL(P)\subseteq \dom(\rho)$.
\end{exercise}

\begin{exercise}\label{exo.val.VL}
  Soit $P$ une proposition. Soient $\rho$ et $\rho'$ deux environnements tels
  que $\rho_{|\;\VL(P)}=\rho'_{|\;\VL(P)}$. Montrer que
  $\Val_\rho(P)=\Val_{\rho'}(P)$.
\end{exercise}

On peut donc définir la relation de vérité, dans un environnement donné, pour
une proposition.

\begin{definition}[Satisfaction]
  Soit $\rho$ un environnement et $P\in\Prop$. On définir la relation
  $\rho\models P$ par $$(\rho\models P) \defeq (\Val_\rho(P) = 1)$$
  On dit alors que $\rho$ satisfait $P$.

  Si pour tout environnement $\rho$ tel que $\VL(P)\subseteq\dom(\rho)$,
  $\rho\models P$, alors on dit que $P$ est une tautologie, et on le note
  $\models P$. Si aucun environnement ne satisfait $P$, on dit alors que $P$ est
  une antilogie.
\end{definition}

\begin{exercise}
  Montrer que $P$ est une antilogie si et seulement si $\lnot P$ est une
  tautologie. En déduire que $P$ est une tautologie si et seulement si $\lnot P$
  est une antilogie.
\end{exercise}

Donnons un premier outil pour traiter des vérités du calcul des propositions :
les tables de vérité.

\begin{definition}[Table de vérité]
  Une table de vérité pour une proposition $P$ de variables libres
  $x_1,\ldots,x_n$ est un tableau contenant $2^n$ lignes et $n+1$ colonnes, où
  chaque ligne énumère un environnement différent, où la
  \ordinalnumeralfeminin{$i$} colonne représente la valeur des environnement en
  $x_i$ et où la dernière colonne représente la valuation de $P$ pour
  l'environnement donné.
\end{definition}

\begin{example}
  Voici une table de vérité pour l'expression
  $\lnot (x_0 \lor x_1)\to \lnot x_0 \land \lnot x_1$ :
\end{example}

Une table de vérité permet de vérifier qu'une proposition est bien une
tautologie puisque, grâce à l'\cref{exo.val.VL}, nous savons que tout
environnement $\rho$ contenant les variable libres d'une proposition $P$ donnée
ne définit $\Val_\rho(P)$ que sur les variables libres listées dans la table de
vérité. Ainsi, une proposition est une tautologie si et seulement si toute la
dernière colonne est remplie de $1$.

\begin{exercise}
  Montrer que $\lnot x_0\land \lnot x_1 \implies \lnot (x_0\lor x_1)$ est une
  tautologie.
\end{exercise}

La notion de tautologie peut être considérée comme la bonne notion de vérité
dans le cadre du calcul propositionnel : une proposition vraie est une
proposition qui s'évalue toujours en une formule vraie. Comme $\to$ sert à
signifier l'implication logique, dire que $A \to B$ est une tautologie revient à
dire que chaque fois que $A$ est vraie, $B$ l'est aussi. Ainsi, en notant
$A \leftrightarrow B$ pour $(A \to B) \land (B \to A)$, dire que
$A \leftrightarrow B$ est une tautologie revient à dire que $A$ et $B$ prennent
toujours la même valeur de vérité. Cette relation est l'équivalence logique :
elle traduit que deux propositions ont la même valeur.

\begin{definition}[\'Equivalence logique]
  Pour tous $P,Q\in\Prop$, on dit que $P$ et $Q$ sont logiquement équivalents,
  ce que l'on écrit $P\equiv Q$, si $\models P \leftrightarrow Q$.
\end{definition}

Un affaiblissement est la relation de conséquence logique.

\begin{definition}[Conséquence logique]
  Pour tous $P,Q\in\Prop$, on dit que $Q$ est conséquence logique de $P$, ce que
  l'on note $P\vDash Q$, si $\models P\to Q$.
\end{definition}

\begin{exercise}
  Vérifier à l'aide de tables de vérités les équivalences suivantes (appelées
  lois de De Morgan) :
  \begin{align*}
    \lnot\lnot x &\equiv x\\
    \lnot (x \land y) &\equiv \lnot x \lor \lnot y\\
    \lnot (x \lor y) &\equiv \lnot x \land \lnot y
  \end{align*}
\end{exercise}

\section[Séquents propositionnels]{Calcul des séquents propositionnels et
  complétude}

Maintenant que nous avons défini une notion satisfaisante de vérité pour une
proposition, il convient de se demander quels outils permettent de l'établir.
Pour l'instant, pour prouver qu'une proposition est une tautologie, la seule
façon de procéder est d'en construire la table de vérité. C'est une façon
largement inefficace, puisqu'elle prend une taille exponentielle en le nombre de
variables libres d'une proposition, et la preuve qu'une proposition est une
tautologie est assez vide de sens : dans l'exercice précédent, il n'a été
question que de calcul et pas de considérations logiques.

\subsection{Théorème de compacité}

Cette sous-section se concentre sur un théorème important de la logique : le
théorème de compacité. Son principe est de permettre de passer d'ensembles finis
à des ensembles infinis. Si son utilité est relativement anecdotique dans le cas
de la logique propositionnelle, il sera un élément essentiel en logique du
premier ordre. Pour pouvoir établir ce théorème, nous devons tout d'abord
généraliser la relation de satisfaction $\vDash$ au cas d'un ensemble infini de
propositions.

\begin{definition}[Environnement infini]
  On définit l'ensemble $\mathcal E$ des environnement potentiellement infinis
  comme l'ensemble des fonctions partielles $\Var \to \{0,1\}$. On définit la
  fonction $\Val : (\mathcal E,\Prop)\to \{0,1\}$, pour tout $\rho\in\mathcal E$,
  par :
  \[\Val_\rho(P) = \Val_{\rho_{|\VL(P)}}(P)\]
  où le deuxième $\Val$ correspond à la définition sur les environnements finis.

  On définit $\rho\models P$ de façon analogue à précédemment :
  \[\rho\models P \iff \Val_\rho(P) = 1\]
\end{definition}

\begin{exercise}
  Montrer que si $\rho$ est un environnement fini, alors $\Val_\rho$ est définie
  de la même manière avec les deux définitions.
\end{exercise}

\begin{definition}[Satisfaction infinie]
  Soit $\mathcal P$ un ensemble (potentiellement infini) de propositions et
  $P\in\Prop$. On définit $\mathcal P\vDash P$ par
  \[\forall \rho\in\mathcal E, (\forall Q \in\mathcal P, \rho\models Q)
  \implies \rho\models P\]
\end{definition}

Le théorème de compacité possède plusieurs expressions différentes. Pour les
donner, nous allons introduire le vocabulaire nécessaire sur les ensembles
(potentiellement infinis) de propositions.

\begin{definition}[Satisfiabilité]
  On dit qu'un ensemble $\mathcal P\subseteq\Prop$ est satisfiable s'il existe
  $\rho\in\mathcal E$ telle que $\forall P\in\mathcal P, \rho\models P$. On dit
  qu'un ensemble $\mathcal P\subseteq\Prop$ est finiment satisfiable si toutes
  ses parties finies sont satisfiables.
\end{definition}

\begin{definition}[Contradiction]
  On dit qu'un ensemble $\mathcal P\subseteq\Prop$ est contradictoire s'il
  n'existe pas d'environnement $\rho\in\mathcal E$ tel que
  $\forall P \in\mathcal P, \rho\models P$. Un ensemble
  $\mathcal P\subseteq \Prop$ est finiment contradictoire si l'une de ses parties
  finies est contradictoire.
\end{definition}

Le théorème de compacité énonce alors l'équivalence entre la version finie et la
version infinie des deux caractères, et de façon équivalence, l'équivalence de
la relation $\vDash$ pour un ensemble infini et pour ses parties finies. Montrons
d'abord que ces trois principes sont bien équivalents.

\begin{proposition}
  Les deux propriétés suivantes sont équivalentes :
  \begin{enumerate}[label=(\roman*)]
  \item\label{enum.compac.prop1} pour tout $\mathcal P\subseteq \Prop$,
    $\mathcal P$ est satisfiable si et seulement s'il est finiment satisfiable.
  \item\label{enum.compac.prop2} pour tout $\mathcal P\subseteq\Prop$,
    $\mathcal P$ est contradictoire si et seulement s'il est finiment
    contradictoire.
  \item\label{enum.compac.prop3} pour tout $\mathcal P\subseteq\Prop$ et
    $P\in\Prop$, $\mathcal P\vDash P$ si et seulement s'il existe
    $F\subfin \mathcal P$ tel que $F\vDash P$.
  \end{enumerate}
\end{proposition}

\begin{proof}
  Pour commencer, remarquons qu'un ensemble satisfiable est finiment satisfiable,
  qu'un ensemble finiment contradictoire est contradictoire, et que s'il existe
  $F\subfin \mathcal P$ tel que $F\vDash P$, alors pour tout environnement $\rho$
  tel que $\rho\models \mathcal P$, on a en particulier $\rho\models F$ et donc
  $\rho\models P$. Il nous suffit donc de travailler sur un seul sens de
  l'équivalence à chaque fois. Nous allons maintenant montrer
  $\ref{enum.compac.prop1}\implies\ref{enum.compac.prop2}\implies
  \ref{enum.compac.prop3}\implies\ref{enum.compac.prop1}$ :
  \begin{itemize}
  \item Supposons \ref{enum.compac.prop1} et montrons \ref{enum.compac.prop2}.
    Soit $\mathcal P\subset \Prop$ contradictoire, montrons que $\mathcal P$
    est finiment contradictoire. Par l'absurde, supposons que $\mathcal P$ n'est
    pas finiment contradictoire : toute partie finie $F\subseteq \mathcal P$
    possède donc une valuation $\rho_F$ telle que $\rho_F\models F$. Mais alors,
    en utilisant \ref{enum.compac.prop1}, on en déduit qu'il existe une valuation
    $\rho\models \mathcal P$. Pourtant $\mathcal P$ est contradictoire : c'est
    une absurdité. Ainsi, par l'absurde, on en déduit que $\mathcal P$ est
    finiment contradictoire.
  \item Supposons \ref{enum.compac.prop2} et montrons \ref{enum.compac.prop3}.
    Soient $\mathcal P\subseteq\Prop, P\in\Prop$ tels que $\mathcal P\vDash P$.
    Montrons qu'il existe $F\subfin\mathcal P$, tel que $F\vDash P$. Comme
    $\mathcal P\vDash P$, on en déduit que $\mathcal P \cup \{\lnot P\}$ est
    contradictoire. Ainsi, par \ref{enum.compac.prop2}, on trouve un ensemble
    $F\subfin \mathcal P \cup \{\lnot P\}$ contradictoire. Si $F$ ne contient pas
    $\lnot P$, alors $F\vDash P$ est vérifié par vacuité de la condition.
    Si $F = F' \sqcup \{\lnot P\}$, alors pour tout $\rho$ tel que
    $\rho\models F'$, $\rho\not\models \lnot P$ donc $\rho\models P$, d'où
    $F'\vDash P$ et $F'\subfin \mathcal P$.
  \item Supposons \ref{enum.compac.prop3} et montrons \ref{enum.compac.prop1}.
    Soit $\mathcal P\subseteq\Prop$ un ensemble finiment satisfiable, montrons
    que $\mathcal P$ est satisfiable. Par l'absurde, supposons que $\mathcal P$
    n'est pas satisfiable. Cela signifie que $\mathcal P\vDash \bot$ : par
    \ref{enum.compac.prop3} on trouve donc $F\subfin \mathcal P$ tel que
    $F\vDash \bot$ : $F$ est donc contradictoire, ce qui contredit le fait que
    $\mathcal P$ est finiment satisfiable. Par l'absurde, on en déduit que
    $\mathcal P$ est satisfiable.
  \end{itemize}
\end{proof}

Il ne nous reste plus qu'à prouver le résultat en lui-même.

\begin{theorem}[Compacité de la logique propositionnelle]
  Pour tout $\mathcal P\subseteq\Prop$, si $\mathcal P$ est finiment satisfiable
  alors $\mathcal P$ est satisfiable.
\end{theorem}

\begin{proof}
  Soit $\mathcal P\subseteq\Prop$ finiment satisfiable, prouvons que $\mathcal P$
  est satisfiable. Pour construire une valuation satisfaisant $\mathcal P$
  entièrement, nous allons construire une suite de valuations partielles,
  $(\rho_n)_{n\in\mathbb N}$, telle que $(\rho_n)_{|\{0,\ldots,m\}}=\rho_m$ pour tous
  $m\leq n$. Tout d'abord, comme $\mathcal P$ est dénombrable, on peut se donner
  une énumération $\mathcal P = \{P_i\}_{i\in\mathbb N}$.
  \begin{itemize}
  \item $\rho_0$ est la fonction partielle nulle part définie.
  \item Soit $n\in\mathbb N$. Supposons donnée $\rho_n$ et construisons alors
    $\rho_{n+1}$. A FINIR
  \end{itemize}

  A FINIR
\end{proof}

\subsection{Calcul des séquents}

Ce qui manque à notre système, c'est une syntaxe : un système simple qui va nous
permettre de justifier des tautologies. Cette syntaxe se base sur la notion de
séquent : un séquent est une paire de listes de propositions, que l'on écrira
$\Gamma\vdash \Delta$, exprimant que $\bigwedge \Gamma \to \bigvee \Delta$ est
une tautologie. L'intérêt de la relation $\vdash$ à définir est de donner un
système facile de preuve : pour prouver que $P$ est une tautologie, il suffit
de prouver $\nil\vdash \cons(P,\nil)$ en suivant les règles de base définissant
$\vdash$.

\begin{notation}
  Dorénavant, pour utiliser des listes, nous écrirons $a, \ell$ pour signifie
  $\cons(a,\ell)$ et nous n'écrirons pas $\nil$ lorsque le contexte permet
  clairement de comprendre qu'il s'agit d'une liste. Par exemple, on confondra
  la simple proposition $P$ et la liste $\cons(\nil,P)$. La notation
  $\Gamma,\Delta$ correspond à la concaténation, qui serait notée avec les
  conventions précédentes $\Gamma\oplus\Delta$.
\end{notation}

\begin{definition}[Calcul des séquents]
  On définit la relation $\vdash \subseteq \List(\Prop)^2$ par les règles
  suivantes:
  \begin{center}
    \AxiomC{$P \in \Gamma$}
    \RightLabel{ax}
    \UnaryInfC{$\Gamma\vdash P$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma,P\vdash \Delta$}
    \AxiomC{$\Theta\vdash \Xi,P$}
    \RightLabel{cut}
    \BinaryInfC{$\Gamma,\Theta\vdash\Delta,\Xi$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma,P,Q,\Gamma'\vdash \Delta$}
    \RightLabel{le}
    \UnaryInfC{$\Gamma,Q,P,\Gamma'\vdash \Delta$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma\vdash \Delta,P,Q,\Delta'$}
    \RightLabel{re}
    \UnaryInfC{$\Gamma\vdash \Delta,Q,P,\Delta'$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma,P,P\vdash \Delta$}
    \RightLabel{lc}
    \UnaryInfC{$\Gamma,P\vdash \Delta$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma\vdash \Delta,P,P$}
    \RightLabel{rc}
    \UnaryInfC{$\Gamma\vdash \Delta,P$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma\vdash \Delta$}
    \RightLabel{lw}
    \UnaryInfC{$\Gamma,P\vdash \Delta$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma\vdash \Delta$}
    \RightLabel{rw}
    \UnaryInfC{$\Gamma\vdash \Delta,P$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma\vdash \Delta,P$}
    \RightLabel{l$\lnot$}
    \UnaryInfC{$\Gamma,\lnot P\vdash \Delta$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma,P\vdash \Delta$}
    \RightLabel{r$\lnot$}
    \UnaryInfC{$\Gamma\vdash \Delta,\lnot P$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma,P\vdash \Delta$}
    \AxiomC{$\Theta,Q\vdash \Xi$}
    \RightLabel{l$\lor$}
    \BinaryInfC{$\Gamma,\Theta,P\lor Q\vdash \Delta,\Xi$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma\vdash \Delta,P$}
    \RightLabel{r$\lor_1$}
    \UnaryInfC{$\Gamma\vdash \Delta,P\lor Q$}
    \DisplayProof
    \quad
    \AxiomC{$\Gamma\vdash \Delta,Q$}
    \RightLabel{r$\lor_2$}
    \UnaryInfC{$\Gamma\vdash \Delta,P\lor Q$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma,P\vdash \Delta$}
    \RightLabel{l$\land_1$}
    \UnaryInfC{$\Gamma,P\land Q\vdash \Delta$}
    \DisplayProof
    \quad
    \AxiomC{$\Gamma,Q\vdash \Delta$}
    \RightLabel{l$\land_2$}
    \UnaryInfC{$\Gamma,P\land Q\vdash \Delta$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma\vdash \Delta,P$}
    \AxiomC{$\Theta\vdash \Xi,Q$}
    \RightLabel{r$\land$}
    \BinaryInfC{$\Gamma,\Theta\vdash \Delta,\Xi,P\land Q$}
    \DisplayProof

    \vspace{0.5cm}
    \AxiomC{$\Gamma,Q\vdash \Delta$}
    \AxiomC{$\Theta\vdash \Xi,P$}
    \RightLabel{l$\to$}
    \BinaryInfC{$\Gamma,\Theta,P\to Q\vdash \Delta,\Xi$}
    \DisplayProof
    \qquad
    \AxiomC{$\Gamma,P\vdash \Delta$}
    \RightLabel{r$\to_1$}
    \UnaryInfC{$\Gamma\vdash \Delta,P\to Q$}
    \DisplayProof
    \quad
    \AxiomC{$\Gamma\vdash \Delta,Q$}
    \RightLabel{r$\to_2$}
    \UnaryInfC{$\Gamma\vdash \Delta,P\to Q$}
    \DisplayProof
  \end{center}

  On dit qu'une proposition $P$ est prouvable si $\vdash P$ est dérivable.
\end{definition}

L'objectif de la suite de cette section est de prouver que $\vdash$ définit en
fait exactement les tautologies, au sens suivant : pour toutes propositions
$P$ et $Q$, $P\vDash Q$ si et seulement si $P\vdash Q$ (ainsi, en prenant par
exemple $P = \top$, on peut montrer que $\vDash P$ si et seulement si
$\vdash P$).

\subsection{Correction du calcul des séquents}

La première étape, qui est la plus simple, est de montrer que le calcul des
séquents est correct, c'est-à-dire que si l'on arrive à dériver
$\Gamma\vdash\Delta$, alors $\bigwedge \Gamma\to\bigvee \Delta$ est une
tautologie. La preuve est simplement une induction sur la relation $\vdash$.
Comme c'est la première longue preuve par induction, nous allons la rédiger
complètement, mais il est d'usage pour prouver une induction dont les cas se
ressemblent de ne prouver que quelques cas les plus significatifs.

Pour commencer, introduisons un lemme permettant de plus facilement travailler
sur le résultat à prouver.

\begin{lemma}
  Soient $\Gamma,\Delta\in\List(\Prop)$ et $\rho$ un environnement, on a
  l'équivalence suivante :
  \[ \Val_\rho(\bigwedge\Gamma\to\bigvee\Delta) = 1 \iff
  \min_{P\in\Gamma}(\Val_\rho(P)) \leq \max_{P\in\Delta}(P)\]

  De même, les deux conditions équivalentes sont aussi équivalentes au fait qu'il
  existe $P\in\Gamma$ et $Q\in\Delta$ telles que $\Val_\rho(P)\leq\Val_\rho(Q)$.
\end{lemma}

\begin{proof}
  Calculons d'abord $\Val_\rho(\bigwedge\Gamma\to\bigvee\Delta)$ :
  \begin{align*}
    \Val_\rho(\bigwedge\Gamma\to\bigvee\Delta) =&
    \max(1 - \Val_\rho(\bigwedge\Gamma), \Val_\rho(\bigvee\Delta))\\
    =& \max(1 - \min_{P\in \Gamma}(\Val_\rho(P)),\max_{P\in\Delta}(\Val_\rho(P)))\\
    =& \max(\max_{P\in\Gamma}(1 - \Val_\rho(P)),\max_{P\in\Delta}(\Val_\rho(P)))
  \end{align*}
  Ainsi, si $\Val_\rho(\bigwedge\Gamma\to\bigvee\Delta) = 1$, on peut trouver
  $P\in\Gamma$ tel que $\Val_\rho(P) = 0$ ou $P\in\Delta$ tel que $\Val_\rho(P)$.
  Dans les deux cas, on en déduit que
  $\min_{P\in\Gamma}(\Val_\rho(P)) \leq \max_{P\in\Delta}(\Val_\rho(P))$.

  Inversement, si $\min_{P\in\Gamma}(\Val_\rho(P))\leq\max_{P\in\Delta}(\Val_\rho(P))$
  alors on peut trouver $P\in\Gamma$ et $Q\in\Delta$ tels que
  $\Val_\rho(P)\leq\Val_\rho(Q)$. Si $\Val_\rho(P) = 0$ alors par le calcul
  précédent, on en déduit que $\Val_\rho(\bigwedge\Gamma\to\bigvee\Delta) = 1$.
  Sinon, alors $\Val_\rho(Q) = 1$ par inégalité, et par le calcul précédent,
  $\Val_\rho(\bigwedge\Gamma\to\bigvee\Delta) = 1$.
\end{proof}

\begin{exercise}
  Montrer l'équivalence au troisième énoncé.
\end{exercise}

\begin{theorem}[Correction du calcul des séquents]
  Soient $\Gamma,\Delta\in\List(\Prop)$. Si $\Gamma\vdash\Delta$, alors
  $\models \bigwedge \Gamma\to \bigvee \Delta$.
\end{theorem}

\begin{proof}
  Soient $\Gamma,\Delta\in\List(\Prop)$ et $\rho$ un environnement, le résultat à
  montrer est que $\Val_\rho(\bigwedge\Gamma\to\bigvee\Delta) = 1$ sachant que
  $\Gamma\vdash \Delta$. Pour cela, on procède par induction sur $\vdash$, en
  utilisant le lemme précédent pour remplacer l'égalité de la valuation par
  l'existence de témoins d'une inégalité :
  \begin{itemize}
  \item Supposons que $P\in\Gamma$. Alors en choisissant $P$, on trouve
    $P\in\Gamma$ et $Q\in\{P\}$ ($=P$) tels que $\Val_\rho(P) \leq\Val_\rho(Q)$.
  \item Supposons qu'il existe $Q\in\Gamma$, $R\in\Delta$, $Q'\in\Theta$ et
    $R'\in\Xi$ tels que
    \begin{equation}\label{eq.prop.corr.1}
      \Val_\rho(Q)\leq\Val_\rho(R)
    \end{equation}
    \begin{equation}\label{eq.prop.corr.2}
      \Val_\rho(Q')\leq\Val_\rho(R')
    \end{equation}
    Fixons ces $Q,R,Q',R'$. Montrons qu'alors il existe $Q''\in\Gamma,\Theta$ et
    $R''\in\Delta,\Xi$ tels que $\Val_\rho(Q'')\leq\Val_\rho(R'')$. Pour le
    prouver, traitons les cas possibles pour la valeur de $\Val_\rho(P)$ :
    \begin{itemize}
    \item si $\Val_\rho(P) = 0$, alors en utilisant l'\cref{eq.prop.corr.2}, deux
      cas sont possibles. Dans le cas où $R' = P$, cela signifie que
      $\Val_\rho(Q') = 0$ et ainsi, en prenant $Q'' = Q'$ et $R''$ quelconque,
      l'inégalité est vérifiée. Dans le cas où $R' \neq P$, il suffit de prendre
      $Q'' = Q'$ et $R'' = R'$.
    \item si $\Val_\rho(P) = 1$, alors en utilisant l'\cref{eq.prop.corr.1}, deux
      cas sont possibles. Dans le cas où $Q = P$, cela signifie que
      $\Val_\rho(R) = 1$ et ainsi, en prenant $R'' = R$ et $Q''$ quelconque,
      l'inégalité est vérifiée. Dans le cas où $R'\neq P$, il suffit de prendre
      $Q'' = Q$ et $R'' = R$.
    \end{itemize}
  \item Supposons qu'il existe $R\in\Gamma,P,Q,\Gamma'$ et $S\in\Delta$ tels que
    $\Val_\rho(R) \leq \Val_\rho(S)$. Dans ce cas, $R\in\Gamma,Q,P\Gamma'$ et
    $S\in\Delta$, et $R,S$ respectent l'inégalité voulue.
  \item On procède comme dans le cas précédent.
  \item Supposons qu'il existe $Q\in\Gamma,P,P$ et $R\in\Delta$ tels que
    $\Val_\rho(Q)\leq\Val_\rho(R)$. Dans ce cas, $Q\in\Gamma,P$ et $R\in\Delta$,
    donnant l'inégalité voulue.
  \item On procède comme dans le cas précédent.
  \item Comme précédemment, si l'on trouve $Q\in\Gamma$ alors $Q\in\Gamma,P$,
    donc on peut réutiliser directement $Q$ pour prouver la propriété sur le
    séquent du bas.
  \item On procède comme dans le cas précédent.
  \item Supposons qu'il existe $Q\in\Gamma$ et $R\in\Delta,P$ tels que
    $\Val_\rho(Q)\leq\Val_\rho(R)$. Si $R \neq P$, il suffit de reprendre $Q$ et
    $Q$ déjà définis. Suppsons maintenant que $R = P$. Distinguons les cas des
    valeurs possibles de $\Val_\rho(P)$ :
    \begin{itemize}
    \item si $\Val_\rho(P) = 0$, alors $\Val_\rho(Q) = 0$, donc on peut prendre
      n'importe quel autre formule dans $\Delta$ pour vérifier l'inégalité.
    \item si $\Val_\rho(P) = 1$, alors on trouve
      $Q' = \lnot P \in \Gamma,\lnot P$ et $R\in \Delta$ quelconque, on a alors
      $\Val_\rho(\lnot P) = 0 \leq \Val_\rho(R)$.
    \end{itemize}
  \item On procède comme dans le cas précédent.
  \item Supposons qu'il existe $R\in\Gamma,P$, $S\in\Delta$, $R'\in\Theta,P$ et
    $S'\in\Xi$ tels que $\Val_\rho(R)\leq\Val_\rho(S)$ et
    $\Val_\rho(R')\leq\Val_\rho(S')$. Si $R$ (respectivement $R'$) est choisie
    comme étant différente de $P$ (respectivement $Q$), le résultat est direct
    en reprenant $(R,S)$ (respectivement $R',S'$). Supposons donc maintenant que
    $R = P$ et $R' = Q$. Dans ce cas,
    $\Val_\rho(P\lor Q) = \max(\Val_\rho(P),\Val_\rho(Q)) \leq \max(\Val_\rho(S),
    \Val_\rho(S'))$ d'où l'inégalité en choisissant $S$ ou $S'$ suivant lequel
    a la plus grande valuation.
  \item Les deux cas de $\mathrm r\lor_i$ pour $i\in\{1,2\}$ se traitent de façon
    analogue, on ne traitera donc que le cas $i = 1$. Supposons donc qu'il existe
    $Q\in\Gamma$ et $R\in\Delta,P$ tels que $\Val_\rho(Q)\leq\Val_\rho(R)$. Dans
    le cas où $R\neq P$, le résultat est direct. Si $R = P$, alors comme
    $\Val_\rho(P\lor Q) \geq \Val_\rho(P)$ et par transitivité de $\leq$, on en
    déduit l'inégalité pour $Q' = Q$ et $R' = P\lor Q$.
  \end{itemize}
\end{proof}

On en déduit donc, comme $\bigwedge P = P$ et $\bigvee Q = Q$, que
$P\vdash Q \implies P \vDash Q$.
