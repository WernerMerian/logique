\chapter{Formaliser les mathématiques}
\label{chp.axiomes}

\minitoc

\lettrine{P}{our} commencer notre étude, nous allons étudier l'une des
propriétés les plus connues de la théorie des ensembles : la capacité
d'expression suffisante pour formaliser toutes les mathématiques usuelles. Ce
chapitre se concentrera donc sur l'étude des axiomes de ZFC et de leur
utilisation pour construire les objets mathémtiques que nous connaissons
habituellement.

Nous devons ici faire quelques éclaircissements d'ordre philosophique. Tout
d'abord, sur la méta-théorie : nous considérons que l'univers ambiant dans
lequel nous pratiquons les mathématiques est lui-même un modèle de la théorie
ZFC. Plus précisément, en notant $\mathcal U$ l'objet mathématique qui sera la
collection de tous les objets mathématiques, ZFC peut être vu comme une théorie
donnant une approximation du comportement de $\mathcal U$.

En particulier, $\mathcal U$ contient des collections, que nous appelons
d'habitude ensembles, et si un objet $X$ apparait dans une collection $C$, on
écrit $X\in C$. Cependant, les objets que nous manipulerons ne seront pas ces
collections, et la relation $\in$ utilisée dans ZFC ne sera pas \og être un
objet mathématique apparaissant dans cette collection intuitive\fg{} : nous
utiliserons des outils purement formels pour étudier ZFC, et devons donc les
distinguer des objets intuitifs associés. Aussi nous appellerons \og ensemble\fg
un objet de la théorie ZFC, et \og collection\fg un ensemble au sens intuitif,
dans $\mathcal U$. De même, les objets formels seront associés à la notion
d'appartenance, et les collections à la notion d'occurrence.

Remarquons cependant qu'un ensemble donne de fait naissance à une
collection : l'ensemble $X$ définit la collection
$\{ x \in\mathcal U\mid x \in X \}$.

Enfin, nous traiterons régulièrement des classes. S'il est possible de ne se
restreindre qu'aux ensembles pour l'étude de ZFC, nous verrons qu'il est bien
plus pratique d'énoncer certaines constructions en terme de classes. Une classe
est une collection qui ne peut pas être représentée par un ensemble (par exemple
la classe des ensembles, \textit{cf}. le paradoxe de Russell), mais que l'on
peut décrire par un prédicat. Ainsi, une classe peut se représenter par le
prédicat lui correspondant. Si une classe $C$ est décrite par un prédicat
$\varphi(x)$, alors $x\in C$ doit se lire comme une reformulation plus lisible
de $\varphi(x)$. Un léger défaut vient avec cette approche~: certains théorèmes,
se référant aux classes, doivent se lire comme des schémas de théorèmes,
c'est-à-dire des théorèmes paramétrés par le prédicat $\varphi$ définissant une
classe.

\section{Axiomes de ZFC}

\subsection[Premiers axiomes]{Extensionalité, paire, union, ensemble de parties}

Commençons par étudier la théorie ZFC en en listant les axiomes. Un premier
point important est de définir le langage sur lequel nous travaillerons : nous
utiliserons $\mathcal L_{\mathrm{ZF}} = \{ \in^2\}$. En effet, tous les énoncés
seront écrits seulement à l'aide du symbole de relation binaire $\in$ et de la
relation $=$, symbole logique déjà inclus dans tout langage.

\begin{remark}
  En réalité, nous le verrons, notre langage sera bien plus riche : nous
  ajouterons des symboles de fonctions, de constantes, et diverses relations.
  Cependant, tous ces ajouts doivent être considérés comme des aides à la
  lecture~: toute proposition formulée dans l'enrichissement que nous donnerons
  au fur et à mesure doit pouvoir se formuler dans $\mathrm L_{\mathrm{ZF}}$, mais
  avec un nombre possiblement bien plus grand de symboles.
\end{remark}

\begin{axiom}[Extensionalité]\label{ax.ZF.ext}
  L'axiome d'extensionalité exprime que deux ensembles sont égaux exactement
  lorsqu'ils possèdent les mêmes éléments :
  \[\forall x \forall y, \qquad x = y \iff (\forall z, z \in x\iff z \in y)\]
\end{axiom}

Cet axiome définit ce que signifie l'égalité dans le monde des ensembles. Cela
permet directement de voir que l'ordre ou le nombre d'occurrences n'importent
pas dans un ensemble, contrairement par exemple au cas des listes. C'est un
axiome au statut particulier car il ne permet pas de construire de nouvel
ensemble. Les autres axiomes, eux, donneront principalement de nouvelles
méthodes pour, à partir d'ensembles déjà construits, définir de nouveaux
ensembles.

\begin{axiom}[Paire]\label{ax.ZF.pair}
  L'axiome de la paire exprime que si deux ensembles $x$ et $y$ ont été
  construits, alors l'ensemble $\{x,y\}$ peut être construit à partir d'eux :
  \[\forall x \forall y \exists z, \qquad \forall a, a \in z \iff
  a = x \lor a = y\]
\end{axiom}

\begin{exercise}
  Montrer que pour tous ensembles $x,y$, il existe un unique ensemble $z$ tel
  que décrit dans l'\cref{ax.ZF.pair}. Cela justifie donc la notation $\{x,y\}$
  pour cet ensemble, puisqu'il n'y a pas d'ambigüité sur lequel il est.
\end{exercise}

En utilisant l'axiome de la paire, on peut ainsi construire des collections
finies telles que $\{x,\{y,z\}\}$, mais on ne peut pas par exemple définir
$\{x,y,z\}$ : il nous faut un axiome permettant d'accéder à l'intérieur d'un
ensemble pour en construire un nouveau.

\begin{axiom}[Union]\label{ax.ZF.union}
  Pour tout ensemble $x$, on peut construire l'ensemble $\bigcup x$ contenant
  les éléments des éléments de $x$ :
  \[\forall x \exists y,\qquad \forall z, z\in y \iff
  (\exists a, z \in a \land a \in x)\]
\end{axiom}

\begin{notation}
  De la même façon qu'avec l'axiome de la paire, l'ensemble $y$ défini par
  l'axiome est unique, on l'écrira donc $\bigcup x$.
\end{notation}

\begin{exercise}
  Soient $x_1,\ldots,x_n$ des ensembles, montrer par récurrence qu'il existe
  l'ensemble $\{x_1,\ldots,x_n\}$.
\end{exercise}

\begin{notation}
  Etant donnée une famille $x_1,\ldots,x_n$ d'ensembles, on définit
  $\displaystyle \bigcup_{i = 1}^n x_i$ comme $\bigcup\{x_1,\ldots,x_n\}$. En
  particulier, $x \cup y$ est $\bigcup\{x,y\}$.
\end{notation}

Enfin, l'axiome de l'ensemble des parties permet de considérer comme un ensemble
la collection des parties d'un ensemble. En un sens, il permet de faire croître
considérablement la taille de ce que l'on peut construire.

\begin{notation}
  On définit le prédicat binaire $\subseteq$, appelé l'inclusion, par
  \[x \subseteq y \defeq \forall z, z \in x \implies z \in y\]
\end{notation}

\begin{axiom}[Ensemble des parties]\label{ax.ZF.pow}
  Pour tout ensemble $x$, il existe l'ensemble $\powerset (x)$ dont les éléments
  sont exactement les ensembles inclus dans $x$ :
  \[\forall x\exists y, \qquad \forall z, z \in y \iff z \subseteq x\]
\end{axiom}

\begin{notation}
  Comme le $y$ défini plus haut est unique, on peut là encore lui donner une
  notation, qui est bien sûr $\powerset(x)$.
\end{notation}

\subsection{Les schémas d'axiomes}

Les axiomes précédemment donnés constituent les briques de base pour construire
des ensembles, mais sont en général trop grossières. L'intérêt de la théorie des
ensembles est de pouvoir construire des ensembles correspondant à des
collections, ce qui manque pour l'instant à notre système. C'est pour cela que
nous ajoutons l'axiome de compréhension : étant donnée une formule $\varphi$ et
un ensemble $X$, on peut construire l'ensemble $\{x \in X\mid \varphi(x)\}$ des
éléments de $x$ vérifiant $\varphi$.

La restriction de la compréhension à des parties d'un ensemble s'explique par le
paradoxe de Russell : si l'on pouvait construire un ensemble pour chaque
formule, on pourrait construire $\{ x \mid x\notin x\}$, qui appartient à
lui-même si et seulement s'il n'appartient pas à lui-même.

Un autre problème doit être contourné, et il est la raison pour laquelle on
parle de schéma d'axiomes et non d'axiome. Si l'on voulait définir le schéma
avec ce qui a été dit, celui-ci commencerait moralement par $\forall \varphi$~:
cela n'est pas une quantification du premier ordre, et il n'est donc pas
possible de donner un axiome pour toutes les formules. A la place, on introduit
un schéma d'axiomes, c'est-à-dire une infinité d'axiomes ayant tous la même
forme et dépendant d'un paramètre que l'on quantifie sur les formules.

\begin{axiom}[Schéma de compréhension]\label{ax.ZF.compre}
  Soit $\varphi(x_0,\ldots,x_n)$ une phrase mathématique à $n$ variables libres.
  Alors pour tous ensembles $X$ et $a_1,\ldots,a_n$, il existe l'ensemble
  $\{x\in X \mid \varphi(x,a_1,\ldots,a_n)\}$, ce qui s'écrit formellement
  \[\forall X\forall a_1\;\cdots\;a_n\exists y,\qquad
    \forall x, x \in y \iff (x\in X\land \varphi(x,a_1,\ldots,a_n))\]
\end{axiom}

\begin{notation}
  On définit donc la notation $\{x\in X\mid \varphi(x,a_1,\ldots,a_n)\}$ pour
  l'ensemble précédent.
\end{notation}

\begin{exercise}
  Soit un ensemble $x$ non vide, montrer qu'il existe l'ensemble $\bigcap x$ des
  éléments qui sont dans tous les éléments de $x$.
\end{exercise}

\begin{notation}
  On définit des notations pour l'intersection analogues à celles pour l'union :
  $\displaystyle\bigcap_{i = 1}^n x_i$ et $x \cap y$.
\end{notation}

\begin{exercise}\label{exo.ZF.prod}
  Soient $x$ et $y$ deux ensembles. On définit le couple $(x,y)$ par
  \[(x,y) \defeq \{\{x,y\},\{x\}\}\]
  Montrer que pour tous $x,y,x',y'$, $(x,y) = (x',y')$ si et seulement si
  $x=x'$ et $y=y'$.

  Construire un prédicat $\varphi(x,y,z)$ tel que $\varphi(x,y,z)$ est vrai
  si et seulement si $z = (x,y)$. En déduire en considérant une partie bien
  choisie de $\powerset (\powerset(x\cup y))$ que
  \[x\times y \defeq \{(a,b)\mid a \in x, b \in y\}\]
  est un ensemble bien défini.
\end{exercise}

Le second axiome, le schéma d'axiomes de remplacement, peut être vu comme une
version plus forte de la compréhension. Plutôt que de s'intéresser à filtrer des
éléments dans un ensemble plus gros, le but de ce schéma d'axiomes est de
construire un ensemble par une fonction. Comme la notion de fonction n'est pas
encore définie, nous utilisons à la place la notion de relation fonctionnelle.

\begin{definition}[Relation fonctionnelle]
  Une relation binaire est ici une formule à deux variables libres. On dit
  qu'une relation $R(x,y)$ est fonctionnelle si pour chaque $x$, il existe au
  plus un $y$ tel que $R(x,y)$. On écrira pour raccourcir
  \[\Funct(R) \defeq \forall x\forall y\forall z, R(x,y)\land R(x,z)\implies
  y = z\]

  Pour une relation fonctionnelle $R(x,y)$, on définit la collection du domaine
  de $R$ :
  \[\dom(R)(x)\defeq \exists y. R(x,y)\]
  et la collection de l'image de $R$ :
  \[\im(R)(y)\defeq \exists x. R(x,y)\]
\end{definition}

\begin{axiom}[Schéma de remplacement]\label{ax.ZF.repl}
  Pour toute formule $R(x_0,\ldots,x_{n+1})$, pour tous ensembles
  $X,a_1,\ldots,a_n$, l'ensemble image de $R(a_1,\ldots,a_n)$ par $X$ est aussi
  un ensemble :
  \[\Funct(R)\implies \forall X \forall a_1\;\cdots\;a_n\exists y,\qquad
  \forall x, x \in y \iff (\exists z, z\in X \land R(a_1,\ldots,a_n,z,x))\]
\end{axiom}

\begin{exercise}
  En remarquant qu'une relation fonctionnelle peut représenter une fonction
  partielle, montrer que le schéma d'axiomes de compréhension peut se déduire du
  schéma d'axiomes de remplacement.
\end{exercise}

\begin{exercise}\label{exo.ZF.prod2}
  En réutilisant le prédicat $\varphi$ de l'\cref{exo.ZF.prod}, montrer grâce au
  schéma d'axiomes de remplacement que pour tous ensembles $x,y$, l'ensemble
  $x\times y$ est bien défini même sans l'axiome de l'ensemble des parties.
\end{exercise}

Donnons aussi l'axiome le plus évident.

\begin{axiom}[Univers non vide]\label{ax.ZF.nonEmpty}
  Il existe un ensemble.
\end{axiom}

\begin{exercise}
  Montrer que l'axiome précédent est équivalent à l'existe de l'ensemble vide
  $\varnothing$ défini par \[\forall z, z\notin \varnothing\]
  (où $x\notin y$ signifie $\lnot(x\in y)$) 
\end{exercise}

\subsection{L'axiome de l'infini et les entiers}

Pour introduire l'axiome suivant, il nous faut d'abord motiver l'utilisation de
ses éléments constitutifs. L'ensemble mathématique le plus élémentaire que l'on
est amené à étudier est certainement $\mathbb N$, l'ensemble des entiers
naturels. Une formalisation habituelle de cet ensemble demande en général les
trois constituants suivant:
\begin{itemize}
\item l'élément $0$
\item la fonction unaire $S$, correspondant à $n \mapsto n + 1$
\item le principe de récurrence, que l'on peut encoder dans les ensembles par le
  fait que si $F\subseteq\mathbb N$, $0 \in F$ et
  $\forall n, n\in F \implies S\;n \in F$ alors $F = \mathbb N$.
\end{itemize}

Chercher à définir $\mathbb N$ dans ZFC nous demande donc de définir ces
éléments. Un candidat naturel à $0$ est $\varnothing$ : les deux sont les objets
nuls par excellence, et $\varnothing$ est le premier ensemble que l'on peut
construire. La question de savoir ce qu'est $S\;x$ pour un ensemble $x$ est
alors naturelle : pour cela, nous utilisons le codage de Von Neumann consistant
à coder l'entier naturel $n$ par $\{0,\ldots,n-1\}$. En effet, cela nous offre
une définition naturelle à la fonction $S$ :
\[S\;x\defeq x\cup \{x\}\]

Remarquons que l'on peut déjà construire tous les entiers que l'on souhaite :
on peut construire $0$ et itérer la fonction $S$. Malheureusement, rien ne nous
dit que la collection $\{S^n\;0\mid n \in \mathbb N\}$ est bien elle-même un
ensemble (où le $\mathbb N$ apparaissant dans la définition est l'ensemble des
entiers naturels de notre méta-théorie). Pour palier ce problème, et pour éviter
d'utiliser notre méta-théorie explicitement, on va à la place définir
$\mathbb N$ comme le plus petit ensemble contenant $0$ et stable par la fonction
$S$. Il nous reste à savoir qu'un ensemble contenant $0$ et stable par $S$
existe bien.

\begin{axiom}[Infini]\label{ax.ZF.infini}
  Il existe un ensemble contenant $\varnothing$ et stable par $S$ :
  \[\exists x, \qquad \varnothing \in x \land
  \forall y, y \in x \implies S\;y\in x\]
\end{axiom}

\begin{remark}
  On peut en fait se passer de l'axiome de l'ensemble vide en prenant l'axiome
  de l'infini (et en adaptant sa définition pour ne pas appeler explicitement
  l'ensemble vide).
\end{remark}

\begin{definition}[Entiers naturels]
  Soit $X$ l'ensemble défini par l'axiome de l'infini. On définit alors
  $\mathbb N$ comme
  \[\mathbb N \defeq \{x\in X \mid \forall Y, Y\subseteq X\land
  \varnothing \in Y \land (\forall a, a \in Y \implies S\;a\in Y) \implies
  x\in Y\}\]
\end{definition}

On vérifie alors le principe de récurrence.

\begin{theorem}[Récurrence]
  Soit $F$ une partie de $\mathbb N$ telle que $\varnothing \in F$ et
  $\forall n, n \in F \implies S\;n \in F$, alors $F = \mathbb N$.
\end{theorem}

\begin{proof}
  Comme $F$ est une partie de $\mathbb N$, il nous suffit de montrer que
  $\mathbb N \subseteq F$. Par transitivité de l'inclusion,
  $F\subseteq X$ pour $X$ l'ensemble à partir duquel $\mathbb N$ a été défini.
  On sait de plus que
  \[x \in \mathbb N \implies \forall Y, Y\subseteq X \land
  \varnothing \in Y \land (\forall a, a \in Y \implies S\;a \in Y) \implies
  x\in Y\]
  d'où, en spécialisant $Y$ en $F$, et sachant que $\varnothing\in F$ et
  $\forall n, n \in F \implies S\;n \in F$, il vient que
  \[x\in \mathbb N \implies x \in F\] ce qui est exactement
  $\mathbb N\subseteq F$, d'où le résultat.
\end{proof}

\begin{notation}
  A partir de maintenant, pour fluidifier l'écriture, on adoptera un style plus
  laxiste sur l'écriture des propositions. Par exemple on se permettra d'écrire
  $\forall x \in X, \psi$ pour $\forall x, x\in X \implies \psi$ et tous les
  légers abus de notations du même genre.
\end{notation}

\subsection{Axiome du choix et fonctions}

Pour introduire l'axiome du choix, le mieux est de parler de ce qu'on voudrait
faire mais ne peut pas faire sans lui. Prenons $X_1,\ldots,X_n$ des ensembles
finis non vides. On peut prouver qu'il existe
$(x_1,\ldots,x_n)\in X_1\times\cdots\times X_n$ (en codant le produit itéré et
les tuples de taille arbitraire). Pour cela, il suffit de raisonner par
récurrence sur $n$ : pour passer de l'étape $n$ à l'étape $n+1$ il suffit de
remarquer que $X_{n+1}$ est non vide, et prendre alors un élément $x\in X_{n+1}$
pour l'ajouter au tuple déjà construit.

Le problème ici est que, si l'on peut obtenir ce résultat sur un nombre fini
d'ensembles non vides, ce processus ne fonctionne plus lorsque l'on passe au cas
infini. On ne peut pas faire une infinité de choix, puisque l'on n'utilise que
des méthodes finies. C'est pourquoi l'axiome du choix existe : il permet de
choisir dans des familles infinies d'ensembles non vides. Donnons d'abord la
définition de cet axiome.

\begin{axiom}[Choix]\label{ax.ZF.AC}
  Soit $X$ un ensemble dont les éléments sont non vides et deux à deux
  disjoints. Alors il existe un ensemble $C$ tel que pour tout $x\in X$,
  $C\cap x$ est un singleton. \'Ecrit formellement :
  \[
  \forall X, \varnothing\neq X \land \varnothing\notin X \land
  (\forall x,y \in X, x \cap y \neq
  \varnothing \implies x = y)
  \implies \exists C, \forall x \in X, \exists y, C \cap x = \{y\}
  \]
\end{axiom}

Il existe plusieurs reformulation naturelles de l'axiome du choix. Pour
celles-ci, nous allons introduire le formalisme pour traiter des fonctions.

\begin{definition}[Fonction]
  Soient $X,Y$ deux ensembles. Une fonction $f : X \to Y$ est une partie
  $\Gamma_f\subseteq X \times X$ (appelée graphe de $f$)  telle que le prédicat
  $(x,y)\in \Gamma$, défini pour $x\in X$ et $y\in Y$, est une relation
  fonctionnelle. On désigne par $\dom(f)$ et $\im(f)$ les ensembles associés à
  la relation fonctionnelle. On dit que $f$ est partielle si $\dom(f) \neq X$,
  et totale si $\dom(f) = X$.

  Pour deux ensembles $X,Y$, on note par $\Funct(X,Y)$ l'ensemble des fonctions
  de $X$ dans $Y$ :
  \[\Funct(X,Y) \defeq \{f : X \to Y\}\]
\end{definition}

\begin{exercise}
  Soient $X$ et $Y$ deux ensembles. Montrer que $\Funct(X,Y)$ est bien un
  ensemble.
\end{exercise}

\begin{remark}
  Dire que $f$ est partielle, dans ce cadre, n'est pas bien défini. En effet, on
  peut toujours prendre une fonction $f : X \to Y$ et l'étendre en
  $f : S\;X \to Y$ : la fonction est la même mais cette propriété change. Pour
  éviter cela, une fonction consistera souvent plutôt en un triplet
  $(X,Y,\Gamma_f)$, mais nous nous concentrerons simplement sur $\Gamma_f$. Il y
  a donc un abus de notation ici lorsque nous construirons par exemple une
  fonction en construisant juste son graphe, mais celui-ci reste léger car on
  connait toujours grâce au contexte les deux autres composantes de la fonction.
\end{remark}

\begin{notation}
  Soit une fonction $f : X \to Y$. On s'autorise à ajouter $f$ comme symbole de
  fonction dans notre langage, dont l'argument est un élément de $X$. Cela n'est
  pas autorisé par défaut, et nous devons donc le coder dans notre langage
  élémentaire (de la même manière que l'on convient qu'il est possible de
  réécrire $x\cup y$ uniquement grâce à $\in$ et $=$). Pour cela, on définit la
  traduction d'une phrase $\varphi$ faisant potentiellement intervenir
  l'expression $f(x)$ en une phrase $\varphi'$ sans $f(x)$, par induction sur
  la structure de $\varphi$ :
  \begin{itemize}
  \item si $\varphi = R(f(x))$ où $R$ est une proposition atomique (une relation
    avec potentiellement d'autres termes que $f(x)$), alors
    \[\varphi' \defeq \forall y\in Y, (x,y)\in \Gamma_f \implies R(y)\]
  \item si $\varphi = \lnot \psi$, alors $\varphi' = \lnot \psi'$.
  \item si $\varphi = \psi \lor \chi$, alors $\varphi' = \psi'\lor \chi'$.
  \item si $\varphi = \psi \land \chi$, alors $\varphi' = \psi'\land \chi'$.
  \item si $\varphi = \exists a, \psi$, alors $\varphi' = \exists a, \psi'$.
  \item si $\varphi = \forall a, \psi$, alors $\varphi' = \forall a, \psi'$.
  \end{itemize}

  On considère donc qu'introduire la notation $f(x)$ est une facilité
  d'écriture.
\end{notation}

\begin{remark}
  Cet abus de notation est aussi possible dans le cas d'une relation
  fonctionnelle qui n'est pas donnée par une fonction (au sens ensembliste).
\end{remark}

On définit de plus les notions d'injectivité, de surjectivité et de bijectivité.

\begin{definition}[Injectivité, surjectivité, bijectivité]
  Une fonction $f : A \to B$ est dite injective si chaque élément $b\in B$ a au
  plus un antécédent, c'est-à-dire si la proposition suivante est vérifiée :
  \[\forall x,y\in A, f(x) = f(y)\implies x=y\]

  Une fonction $f : A \to B$ est dite surjective si tout élément $b\in B$ a au
  moins un antécédent, c'est-à-dire si la proposition suivante est vérifiée :
  \[\forall y\in B, \exists x \in A, f(x)=y\]

  Une fonction $f : A \to B$ est dite bijective si elle est à la fois injective
  et surjective.
\end{definition}

Donnons un exercice pour manipuler la notion de fonction et celle de récurrence.

\begin{exercise}
  Montrer que l'on peut définir des fonctions par récursion sur $\mathbb N$,
  c'est-à-dire montrer que si l'on a un ensemble $X$, un élément $x_0\in X$ et
  une fonction $f_S : \mathbb N \times X \to X$ alors il existe une unique
  fonction $f : \mathbb N \to X$ telle que
  \[\begin{cases}
  f(0) = x_0\\
  \forall n \in \mathbb N, f(S\;n) = f_S(n,f(n))
  \end{cases}\]
\end{exercise}

L'exercice suivant permet de définir des fonctions depuis un produit cartésien
en considérant seulement ses projections.

\begin{exercise}
  Soient $X,Y,Z$ des ensembles. Montrer qu'il existe une bijection entre
  $\Funct(X\times Y,Z)$ et $\Funct(X,\Funct(Y,Z))$ donnée par
  $f\mapsto (x\mapsto y \mapsto f(x,y))$.
\end{exercise}

Donnons maintenant deux nouvelles formulations de l'axiome du choix.

\begin{proposition}
  L'axiome du choix est équivalent à la proposition suivante~:
  \[\forall x, \varnothing\neq x \land \varnothing\notin x \implies
  \exists f : x \to \bigcup x, \forall y \in x, f(y) \in y\]
\end{proposition}

\begin{proof}
  Supposons l'axiome du choix. On considère un ensemble $x$ dont tous les
  éléments sont non vides. On définit alors l'ensemble
  \[C_0\defeq \{\{(y,z)\mid z \in y\}\mid y \in x\}\]
  Comme $x$ n'a pas d'élément vide, chaque élément de $C_0$ est non vide. De
  plus, si $a \neq b \in C_0$, alors
  $a = \{(a,y)\mid y \in a\}$ et $b = \{(b,y)\mid y \in b\}$, donc
  $a\cap b = \varnothing$. On peut donc appliquer l'axiome du choix sur
  $C_0$ pour trouver $C$ tel que pour tout $y\in x$,
  \[\{(y,z)\mid z \in y\}\cap C = \{(y,f(y))\}\]
  donc $C\cap \bigcup C_0$ définit exactement une relation fonctionnelle $f$
  (à $y$ on n'associe qu'une seule image), et par définition de $C_0$ on sait
  que $f(y)\in y$.

  Supposons qu'on possède une fonction de choix pour tout ensemble sans élément
  vide. Soit $X$ un ensemble dont les éléments sont non vides et deux à deux
  disjoints. On peut alors trouver $f : X \to \bigcup X$ telle que $f(x)\in x$
  pour tout $x\in X$. Soit alors $C = \im(f)$. Comme $f(x)\in x$ et tous les
  éléments de $X$ sont deux à deux disjoints, on en déduit que $C\cap x$
  contient au plus un élément, pour chaque $x\in X$. Comme de plus
  $f(x) = x$, $C\cap x$ contient au moins un élément. Donc $C\cap x$ est un
  singleton.
\end{proof}

\begin{proposition}
  L'axiome du choix est équivalent à la proposition suivante~:
  \[\forall x, x\neq\varnothing\implies
  \exists f : \powerset (x) \backslash \{\varnothing\} \to x,
  \forall y \in \powerset(x)\backslash \{\varnothing\}, f(y)\in y\]
\end{proposition}

\begin{proof}
  Cette formulation est un cas particulier de la formulation précédente, puisque
  $powerset(x)\setminus\{\varnothing\}$ est non vide et ne contient que des
  éléments non vides.

  Réciproquement, supposons qu'on a $x$ non vide donc les éléments sont non
  vides. On a alors
  \[x\subseteq \powerset\bigg(\bigcup x\bigg)\setminus\{\varnothing\}\]
  d'où le résultat en spécialisant une fonction de choix donnée par hypothèse
  sur $x$.
\end{proof}

Une autre formulation importante nécessite la notion de produit, que l'on peut
simplement considérer comme une généralisation de l'opération $\times$.

\begin{definition}[Produit cartésien quelconque]
  Soit $X$ un ensemble, on définit $\prod X$ par
  \[\prod X \defeq \Big\{f : X \to \bigcup X \;\Big|\; \forall x \in X, f(x)\in
  x\Big\}\]

  Si $\{X_i\}_{i\in I}$ est une famille de fonctions (c'est-à-dire une fonction
  $g : i \mapsto X_i$) alors on considère que
  \[\prod_{i\in I} X_i \defeq \Big\{ f : I \to \bigcup_{i\in I} X_i\;\Big|\;
  \forall i \in I, f(i) \in X_i\Big\}\]
\end{definition}

\begin{proposition}
  L'axiome du choix est équivalent à la proposition suivante :
  \[\forall x, x\neq \varnothing \land (\forall y \in x, y \neq \varnothing)
  \implies \prod x \neq \varnothing\]
\end{proposition}

\begin{proof}
  Par définition, $\prod X$ est non vide si et seulement si on a une fonction
  $f : X \to \bigcup X$ telle que $\forall x \in X, f(x)\in x$. C'est un énoncé
  précédent de l'axiome du choix.
\end{proof}

\subsection{Axiome de fondation}

Le dernier axiome de ZFC est l'axiome de fondation. Selon les auteurs, il est ou
non ajouté à ZFC : ici, nous considérerons que ZFC le contient. Cet axiome
empêche l'existence de cycles d'appartenance, par exemple d'ensemble $x$ tel que
$x\in x$. Formellement, l'axiome énonce que la relation $\in$ sur l'univers
ensembliste $\mathcal U$ est bien fondée.

\begin{axiom}[Fondation]\label{ax.ZF.AF}
  Pour tout ensemble $x$ non vide, il existe $y\in x$ tel que
  $x\cap y = \varnothing$. Formellement, cela s'écrit :
  \[\forall x, x\neq\varnothing \implies \exists y \in x, x\cap y =
  \varnothing\]
\end{axiom}

Si l'on voit un ensemble $x$ comme un arbre, où chaque n\oe ud est un ensemble
et où l'on place une arête entre $x$ et $y$ si $x\in y$, alors l'axiome de
fondation stipule que pour chaque ensemble, l'arbre ainsi construit n'a pas de
branche infinie (ni de cycle).

Remarquons que l'arbre que nous avons construit contient non seulement les
éléments de $x$ mais aussi les éléments des éléments de $x$, et ainsi de suite.
Cette idée nous permet d'introduire la notion d'ensemble transitif, qui est un
ensemble tel que l'arbre ainsi généré ne contient que des éléments de l'ensemble
(c'est-à-dire que tous les éléments des éléments de $x$ sont aussi éléments de
$x$).

\begin{definition}[Ensemble transitif]
  Soit un ensemble $x$. On dit que $x$ est transitif si tout élément d'un
  élément de $x$ est aussi élément de $x$. Formellement, cela s'écrit
  \[\trans(x) \defeq \forall y\in x, \forall z \in y, z\in x\]
\end{definition}

Remarquons qu'étant donné un ensemble, on peut toujours ajouter ses éléments,
les éléments de ses éléments et ainsi de suite pour obtenir à la fin un ensemble
transitif.

\begin{proposition}
  Soit $x$ un ensemble. Alors il existe un plus petit ensemble $\trcl(x)$
  transitif contenant $x$.
\end{proposition}

\begin{proof}
  Pour construire $\trcl(x)$, on construit la suite d'ensembles
  $(x_i)_{i\in\mathbb N}$ suivante :
  \begin{itemize}
  \item $x_0 = x$
  \item $x_{i+1} = \bigcup x_i$
  \end{itemize}
  L'ensemble $\trcl(x)$ est alors $\displaystyle\bigcup_{n\in \mathbb N} x_n$.

  Vérifions que $\trcl(x)$ est bien transitif et contient $x$. Comme
  $x_0\subseteq \trcl(x)$ par définition de l'union, $\trcl(x)$ contient $x$.
  Soient $y\in \trcl(x)$ et $z\in y$. Par définition, il existe $n\in \mathbb N$
  tel que $y\in x_n$. Alors $z\in x_{n+1}$ puisque $z\in y \in x_n$ et
  $x_{n+1}=\bigcup x_n$. Ainsi $z\in \trcl(x)$.

  Soit un ensemble transitif $y$ contenant $x$. Alors par récurrence sur $n$,
  $x_n\subseteq y$ :
  \begin{itemize}
  \item par hypothèse, $x\subseteq y$.
  \item si $x_n\subseteq y$, alors soit $z\in x_{n+1}$, par définition on trouve
    $a\in x_n$ tel que $z\in a \in x_n$, et comme $x_n\subseteq y$, $a\in y$.
    Mais $y$ est transitif, donc $z\in y$ : on en déduit que
    $x_{n+1}\subseteq y$.
  \end{itemize}
  Par récurrence, on en déduit que $\forall n\in\mathbb N, x_n\subseteq y$,
  d'où $\trcl(x)\subseteq y$.
\end{proof}

\begin{exercise}
  Montrer qu'un ensemble $x$ est transitif si et seulement si la propriété
  suivante est vérifiée :
  \[\forall y\in x, y\subseteq x\]
\end{exercise}

Les deux propriétés de bonne fondation de $\in$ et de transitivité mènent au
lemme d'effondrement de Mostowski. Celui-ci montre que toute classe munie d'une
relation se comportant suffisamment comme la relation $\in$ peut en fait se
simuler par une unique classe transitive bien fondée où la relation est
directement $\in$.

\begin{lemma}[Effondrement de Mostowski]\label{lem.most}
  Soit $\mathcal M$ une classe et $R$ une relation vérifiant :
  \begin{itemize}
  \item $R$ définit des ensembles, c'est-à-dire que pour tout $x\in \mathcal M$,
    la collection définie par $R^{-1}[x] = \{y\mid y R x\}$ est un ensemble.
  \item $R$ est bien fondée, c'est-à-dire :
    \[\forall X\subseteq \mathcal M, \exists x \in X, R^{-1}[x]\cap X =
    \varnothing\]
  \item $R$ est extensionnelle, c'est-à-dire :
    \[\forall x,y\in \mathcal M, R^{-1}[x] = R^{-1}[y] \implies x = y\]
  \end{itemize}

  Alors il existe une unique classe $\mathcal N$ et un unique isomorphisme
  $\phi : \mathcal M\to \mathcal N$ tels que
  $(\mathcal M,R) \overset{\phi}{\cong} (\mathcal N,\in)$.
\end{lemma}

\begin{remark}
  Nous n'avons pas formellement défini ce qu'est un isomorphisme entre classes.
  Cette définition est assez naturelle : étant données deux classes $\mathcal M$
  et $\mathcal N$ avec chacune une relation $R$ (respectivement $R'$), un
  isomorphisme $\phi : (\mathcal M,R)\cong (\mathcal N,R')$ est une proposition
  $\phi$ à deux variables libres telle que, pour une proposition $\psi$
  définissant $\mathcal M$ et une proposition $\chi$ définissant $\mathcal N$,
  les propositions suivantes peuvent être prouvées :
  \begin{itemize}
  \item $\forall x,\forall y,\forall z, \psi(x)\land \chi(y)\land\chi(z)\land
    \phi(x,y)\land\phi(x,z) \implies y = z$
  \item $\forall x,\psi(x)\implies \exists y, \chi(y)\land \phi(x,y)$
  \item $\forall x,\forall y,\forall z, \psi(x)\land\psi(y)\land\chi(z)\land
    \phi(x,z)\land\phi(y,z)\implies x = y$
  \item $\forall y,\chi(y)\implies \exists x, \psi(x)\land \phi(x,y)$
  \item $\forall x,\forall x',\forall y, \forall y', \psi(x)\land\psi(x')\land
    \chi(y)\land\chi(y')\land\phi(x,y)\land\phi(x',y')\implies
    (xR x'\iff yR' y')$
  \end{itemize}

  Cependant, nous allons simplement travailler sur les classes comme sur les
  ensembles, puisque les manipulations syntaxiques correspondant à nous
  arguments ensemblistes habituels sont les mêmes que celles que nous allons
  faire sur nos classes. Remarquons simplement que ce lemme est, puisqu'il parle
  de classe, un schéma de lemmes paramétré par les propositions définissant
  $\mathcal M$ et $R$.
\end{remark}

\begin{proof}
  Montrons d'abord que si $M_1$ et $M_2$ sont deux classes transitives et que
  $\theta : M_1\to M_2$ est un isomorphisme pour la rleation $\in$, alors
  $\theta$ est l'identité.

  Par l'absurde, supposons que $\theta$ n'est pas l'identité. L'ensemble
  $C = \{x\mid \theta(x)\neq x\}$ n'est donc pas vide. Par l'axiome de
  fondation, on trouve un élément minimal $x\in C$, et soit $y = \theta(x)$. On
  peut alors remarquer que par minimalité de $x$, pour tous $z\in x$,
  $\theta(z)=z$, et comme $\theta$ est un isomorphisme on en déduit que
  $z\in y$. Ainsi $x\subseteq y$. Il nous reste à montrer que $y\subseteq x$~:
  si $z\in y$, alors $z\in M_2$ comme $M_2$ est une classe transitive, donc on
  trouve $a\in M_1$ tel que $\theta(a)=z$, mais comme $\theta(a)\in \theta(x)$,
  on en déduit que $a\in x$, et puisque $x$ est minimal dans $C$, $\theta(a)=a$,
  c'est-à-dire $z = a$. Donc $y\subseteq x$. On a donc une absurdité étant donné
  que $x = \theta(x)$ : ainsi $C$ est vide, donc $\theta$ est l'identité.

  Reprenons maintenant notre classe $\mathcal M$. On définit alors la classe
  $\mathcal N$ par l'image de la fonction $\pi$ définie comme suit :
  \[\begin{array}{rcccl}
  \pi & : & \mathcal M & \longrightarrow & \mathcal U\\
  & & x & \longmapsto & \{\pi(y)\mid y \in R^{-1}[x]\}
  \end{array}\]
  c'est-à-dire que la relation $\pi$ est définie par la proposition
  \[\pi(y) \defeq \{\pi(z)\mid z \in R^{-1}[x]\}\]
  où l'on prouve par l'absurde que cette proposition vérifie les propriétés d'un
  isomorphisme entre $(\mathcal M,R)$ et $(\mathcal N,\in)$, en utilisant un
  principe analogue à la preuve précédente. La classe $\mathcal N$ est définie
  par la proposition
  \[y \in \mathcal N \defeq \exists x\in\mathcal M, \pi(x,y)\]

  L'unicité découle alors du fait que s'il existe une autre telle classe
  $\mathcal N'$, alors l'isomorphisme entre elle et $\mathcal N$ vérifie les
  hypothèses du résultat intermédiaire, et est donc l'identité. D'où
  $\mathcal N = \mathcal N'$.
\end{proof}

\begin{remark}
  Notre définition de $\pi$ peut sembler illégitime, étant donné que le
  \cref{thm.recur.bf} ne couvre que le cas où le domaine est un ensemble (et
  qu'il est un ordre bien fondé, mais il est assez clair que cela se déroule de
  la même façon pour une relation bien fondée qui n'est pas forcément un ordre).
  Cependant, on voit que pour définir $\pi(y)$, il suffit de le définir sur
  un ensemble, celui des éléments inférieurs (comme $R$ définit des ensembles,
  cela fonctionne bien).

  Ainsi la version purement formelle de $\pi$ devrait être, avec $\varphi$ le
  prédicat définissant $\mathcal M$~:
  \begin{multline*}
    \pi(x,y) \defeq \exists X,
    (\forall a \in X, \varphi(a) \land \forall b, b R a \implies b \in X)
    \land \exists f : X \to \mathcal U, \\(\forall z\in X,
    \forall Y, (\forall a, a \in Y \iff a R z) \implies
    f(z) = \{f(a) \mid a R z\})\\
    \land f(x) = y
  \end{multline*}

  Et l'utilisation du \cref{thm.recur.bf} permet de conclure que cette relation
  est bien fonctionnelle.
\end{remark}

\subsection{Résumé~: les fragments de ZFC}

Concluons cette section en redonnant les différents axiomes de ZFC. En fait,
en enlevant les doublons, il nous suffit d'un petit fragment de ce que nous
avons vu. Donnons d'abord les axiomes de ZF~:
\begin{itemize}
\item l'\cref{ax.ZF.ext} (extensionalité)
\item l'\cref{ax.ZF.union} (réunion)
\item l'\cref{ax.ZF.pow} (ensemble des parties)
\item l'\cref{ax.ZF.repl} (schéma de remplacement)
\item l'\cref{ax.ZF.infini} (infini)
\item l'\cref{ax.ZF.AF} (fondation)
\end{itemize}
ZFC est alors obtenue comme $\ZF + \AxC$. On peut aussi définir
$\ZF - \AxF$ par exemple. De plus, la théorie Z, de Zermelo, est la théorie
contenant le schéma d'axiomes de compréhension mais pas de remplacement,
ne contenant pas l'axiome de fondation et contenant l'axiome de la paire (et les
axiomes d'extensionalité, de réunion, d'ensemble des parties et de l'infini).

Dans la suite du chapitre, nous n'aurons besoin que de $\ZF - \AxF$.

\section{Construction des autres ensembles de nombres}

Nous avons construit $\mathbb N$ directement grâce à l'axiome de l'infini, mais
celui-ci n'est pas le seul ensemble de nombres important à construire. Dans
cette section, nous allons vois la construction de $\mathbb Z, \mathbb Q$ et
$\mathbb R$, ainsi que leurs propriétés essentielles. Nous allons commencer
notre étude par celle de $\mathbb N$, puisque nous avons simplement défini cet
ensemble et le principe de récurrence.

\subsection{Les entiers naturels}

Rappelons les points essentiels à propos de $\mathbb N$ : cet ensemble contient
$0$, une fonction $S$ unaire, et le principe de récurrence. De plus, on peut
définir une fonction par récurrence. Nous pouvons donc définir les fonctions
$+$ et $\times$.

\begin{definition}[Addition, multiplication]
  On définit la fonction $+ : \mathbb N \times \mathbb N \to \mathbb N$ et la
  fonction $\times : \mathbb N \times \mathbb N \to \mathbb N$ par récurrence
  sur leur premier argument :
  \begin{itemize}
  \item $\forall n \in \mathbb N, n + 0 = n$
  \item $\forall n,m\in \mathbb N, n + (S\;m) = S(n + m)$
  \item $\forall n \in \mathbb N, n \times 0 = 0$
  \item $\forall n,m\in\mathbb N, n \times (S\;m) = n\times m + n$
  \end{itemize}
\end{definition}

\begin{notation}
  On définit $1 = S\;0$, $2 = S\;S\;0$ et ainsi de suite. Plutôt que $S\;n$,
  nous utiliserons souvent l'expression $n + 1$.
\end{notation}

\begin{property}
  Les propriétés suivantes sont vérifiées :
  \begin{itemize}
  \item $0$ est un élément neutre pour $+$ : pour tout $n\in \mathbb N$,
    $0 + n = n$ et $n + 0 = n$.
  \item $+$ est commutatif : pour tous $n,m\in\mathbb N$, $n+m=m+n$.
  \item $+$ est associatif : pour tous $n,m,p\in\mathbb N$,
    $n+(m+p) = (n+m)+p$.
  \item $+$ est régulier : pour tous $n,p,m\in\mathbb N$, si $n+m = n+p$ alors
    $m=p$.
  \item pour tous $n,m\in \mathbb N$, si $n + m = 0$ alors $n=0$ et $m = 0$.
  \item $+$ distribue sur $\times$ : pour tous $n,m,p\in\mathbb N$,
    $n\times(m+p) = n\times m + n \times p$ et
    $(n+m)\times p = n\times p + m \times p$.
  \item $1$ est un élément neutre pour $\times$.
  \item $0$ est absorbant pour $\times$ : pour tout $n\in \mathbb N$,
    $0\times n = 0$.
  \item $\times$ est commutatif.
  \item $\times$ est associatif.
  \item La structure est intègre : pour tous $n,m\in \mathbb N$, si
    $n\times m = 0$ alors $n = 0$ ou $m = 0$.
  \end{itemize}
\end{property}

\begin{proof}
  On montre seulement quelques résultats parmi ceux-ci~:
  \begin{itemize}
  \item $0$ est neutre~: pour la première égalité, le résultat est par
    définition. Pour la deuxième, montrons par récurrence sur $n$ que
    $0+n = n$~:
    \begin{itemize}
    \item $0 + 0 = n$ par définition de $+$.
    \item supposons que $0+n = n$, alors $0+S\;n = S\;(0+n) = S\;n$.
    \end{itemize}
    D'où le résultat par récurrence.
  \item $+$ est commutatif~: on montre d'abord par récurrence sur $m$ que pour
    tous $n,m\in\mathbb N$, on a $S\;n+m = S\;(n+m)$~:
    \begin{itemize}
    \item $S\;n+0=S\;n = S\;(n+0)$.
    \item si $S\;(n+m) = S\;(n+m)$, alors
      \begin{align*}
        S\;n+S\;m &= S\;(S\;n+m)\\
        &= S\;(S\;(n+m))\\
        &= S\;(n+S\;n)
      \end{align*}
    \end{itemize}
    Nous donnant un premier résultat par récurrence. On montre maintenant que
    $+$ est commutatif par récurrence sur l'argument de droite~:
    \begin{itemize}
    \item $n+0 = n = 0+n$ comme nous l'avons déjà prouvé.
    \item supposons que $n+m = m+n$, alors
      \begin{align*}
        n + S\;m &= S\;(n+m)\\
        &= S\;(m+n)\\
        &= S\;m + n
      \end{align*}
      en utilisant le résultat précédent.
    \end{itemize}
    Donc $+$ est commutatif.
  \item $+$ est associatif. On prouve par récurrence sur $k$ la proposition
    \[\forall k\in\mathbb N,\forall n\in\mathbb N,\forall m\in \mathbb N,
    n + (m + k) = (n + m) + k\]
    \begin{itemize}
    \item si $k = 0$ alors on $n + (m + 0) = n + m$ et $(n+m)+0=n+m$, d'où
      l'égalité.
    \item supposons la proposition pour $k$, alors
      \begin{align*}
        n+(m+S\;k) &= n + S\;(m + k)\\
        &= S\;(n+(m+k))\\
        &= S\;((n+m)+k)\\
        &= (n+m)+S\;k
      \end{align*}
    \end{itemize}
    D'où le résultat par récurrence.
  \end{itemize}
  L'ensemble des propriétés confère à $(\mathbb N,0,1,+,\times)$ une structure
  de demi-anneau intègre.
\end{proof}

\begin{exercise}
  Démontrer les autres propriétés non démontrées ci-dessus.
\end{exercise}

La relation $\leq$ est aussi définissable grâce à notre langage ensembliste.

\begin{definition}[Inégalité]
  On définit la relation $\leq\subseteq \mathbb N \times \mathbb N$ par :
  \[n \leq m \defeq \exists k \in \mathbb N, m = n + k\]
\end{definition}

\begin{property}
  La relation $\leq$ est une relation d'ordre.
\end{property}

\begin{proof}
  Prouvons que la relation est réfléxive, antisymétrique et transitive :
  \begin{itemize}
  \item soit $n\in \mathbb N$, alors $n = n + 0$, d'où $n\leq n$.
  \item soient $n,m\in \mathbb N$, supposons que $n \leq m$ et $m \leq n$. On
    trouve alors $k,k'$ tels que $n = m + k$ et $m = n + k'$. En substituant
    la deuxième inégalté dans la première, on obtient alors
    \begin{align*}
      n &= (n + k') + k\\
      &= n + (k' + k)\\
      n + 0 &= n + (k' + k)\\
      0 &= k + k'\qquad\text{par régularité de }+\\
    \end{align*}
    d'où $0 = k$, donc $n = m$.
  \item soient $n,m,p\in \mathbb N$ tels que $n\leq m$ et $m\leq p$. On trouve
    donc $k,k'$ tels que $m = n + k$ et $p = m + k'$. Par substitution, on en
    déduit que $p = (n + k) + k'$, et par associativité $p = n + (k + k')$, d'où
    $n \leq p$.
  \end{itemize}
  Ainsi, $\leq$ est une relation d'ordre.
\end{proof}

\subsection{Les entiers relatifs}

Nous allons maintenant construire les entiers relatifs, dont l'ensemble est
noté $\mathbb Z$, avec la construction classique~: on cherche à transformer
le monoïde $(\mathbb N,0,+)$ en un groupe. Cette construction se généralise
en fait en une construction sur n'importe quel monoïde commutatif.

Nous allons donc voir d'abord la construction de $\mathbb Z$, puis la
construction plus générale du symétrisé d'un monoïde commutatif.

L'ensemble $\mathbb Z$ sera vu comme un quotient de l'ensemble
$\mathbb N \times \mathbb N$. L'idée est de considérer une paire $(n,m)$ comme
l'entier $n - m$. On voit alors que pour avoir $(n,m) = (p,q)$, il faut et il
suffit que $n - m = p - q$, c'est-à-dire que $n + q = p + m$. Cela motive la
définition de notre relation $\sim$.

\begin{definition}[Congruence additive]
  On définit la relation binaire $\sim$ sur $\mathbb N \times \mathbb N$ par~:
  \[(n,m)\sim (p,q) \defeq n + q = p + m\]
\end{definition}

\begin{proposition}
  La relation $\sim$ est une relation d'équivalence.
\end{proposition}

\begin{proof}
  On vérifie les axiomes d'une relation d'équivalence~:
  \begin{itemize}
  \item on voit que $n+m=n+m$ donc $(n,m)\sim (n,m)$.
  \item supposons que $(n,m) \sim (p,q)$, alors $n + q = p + m$, donc par
    symétrie de l'égalité $p + m = n + q$, donc $(p,q)\sim (n,m)$.
  \item supposons que $(n,m)\sim(p,q)$ et $(p,q)\sim (r,s)$. On sait donc que
    $n + q = p + m$ et $p + s = r + q$. En ajoutant $r$ de chaque côté dans
    la première équation et en réordonnant les termes, on a alors
    \[n + (r + q) = p + m + r\]
    d'où $n + p + s = p + m + r$ donc, par régularité, $n + s = r + m$.
    Donc $(n,m)\sim(r,s)$.
  \end{itemize}
  Ainsi $\sim$ est une relation d'équivalence.
\end{proof}

Pour simplifier nos constructions, nous allons maintenant introduire la notion
de congruence.

\begin{definition}[Congruence]
  Soit $(X,\star)$ un magma. On appelle congruence une relation d'équivalence
  $\sim\subseteq X \times X$ telle que
  \[\forall x,y,x',y' \in X, x\sim x' \land y \sim y'
  \implies x\star y \sim x' \star y'\]
\end{definition}

Une congruence nous permet de définir directement une opération sur l'ensemble
quotient.

\begin{proposition}
  Soit $(X,\star)$ un magma et $\sim$ une congruence sur $(X,\star)$. Alors
  il existe une unique opération de magma $\star'$ définie sur $X/\sim$
  vérifiant
  \[\forall x,y \in X, \overline{x\star y} = \overline x\star' \overline y\]
\end{proposition}

\begin{proof}
  Le fait qu'il existe au plus une telle opération découle directement du fait
  que la propriété définit l'opération $\star'$. On veut donc montrer que
  l'opération est bien définie~: soient $x,x',y,y'\in X$ tels que
  $x\sim x'$ et $y\sim y'$, alors comme $\sim$ est une congruence, on en
  déduit que $x\star y \sim x' \star y'$, donc que
  \[\overline x \star' \overline y = \overline{x'}\star' \overline{y'}\]
  c'est-à-dire que le résultat de $\star'$ ne dépend pas du représentant choisi.
\end{proof}

\begin{exercise}
  Montrer que si les propriétés suivantes sont vraies pour $(X,\star)$ alors
  elles le sont aussi pour $(X/\sim,\star')$~:
  \begin{itemize}
  \item associativité
  \item commutativité
  \item existence d'un élément neutre
  \item existence d'un inverse
  \item régularité à gauche (respectivement à droite)
  \end{itemize}
\end{exercise}

En revenant sur le cas de notre construction de $\mathbb Z$, on voit que
$\mathbb N\times\mathbb N$ peut être muni d'une structure de monoïde en
considérant l'addition coordonnée par coordonnée~: $(n,m)+(p,q) = (n+p,m+q)$.
Il se trouve que $\sim$ est une congruence sur cette opération.

\begin{proposition}
  $\sim$ est une congruence sur $\mathbb N \times \mathbb N$ avec la structure
  de monoïde coordonnée par coordonnée.
\end{proposition}

\begin{proof}
  Il s'agit d'une simple vérification~: supposons que $(n,m)\sim(n',m')$ et que
  $(p,q)\sim(p',q')$, alors $(n+p,m+q)\sim(n'+p',m'+q')$~:
  \begin{align*}
    n + p + m' + q' &= (n + m') + (p + q')\\
    &= (n' + m) + (p' + q)\\
    &= n' + p' + m + q
  \end{align*}
\end{proof}

Ainsi, en notant $\mathbb Z = (\mathbb N \times \mathbb N) / \sim$, on a
défini une opération $+$ lui conférant une structure de monoïde commutatif. Il
nous reste à prouver que c'est en fait un groupe abélien.

\begin{proposition}
  $(\mathbb Z,+)$ est un groupe abélien.
\end{proposition}

\begin{proof}
  Soit $x \in \mathbb Z$, par définition on trouve $n,m\in\mathbb N$ tels que
  $x = \overline{(n,m)}$, et on pose $-x = \overline{(m,n)}$. On montre que
  $x + (-x) \sim (0,0)$. Par définition,
  \[x + (-x) = \overline{(n + m, m + n)}\]
  et $n + m + 0 = 0 + m + n$, donc $\overline{(n,n)}=\overline{(0,0)}$, d'où le
  résultat.
\end{proof}

On s'attarde maintenant à la structure multiplicative de $\mathbb Z$.

\begin{definition}
  On définit sur $\mathbb N\times \mathbb N$ l'opération $\times$ par
  \[(n,m)\times(p,q) = (n\times p + m \times q, m \times p + n \times q)\]
  et $\times$ est définie sur $\mathbb Z$ par passage au quotient de cette
  opération par $\sim$.
\end{definition}

\begin{proof}
  Pour que la définition ait du sens, il faut vérifier que $\sim$ est bien une
  congruence pour $\times$. Soient $(n,m)\sim(n',m')$ et $(p,q)\sim(p',q')$, et
  montrons la relation $(n,m)\times(p,q)\sim(n',m')\times(p',q')$, ce qui
  revient à l'égalité
  \[n\times p + m \times q + m' \times p' + n' \times q' =
  n' \times p' + m' \times q' + m \times p + n \times q\]
  A FAIRE
\end{proof}

\begin{exercise}
  Montrer que $(\mathbb Z,0,+,1,\times)$ est un anneau.
\end{exercise}

On montre qu'on peut injecter le demi-anneau $(\mathbb N,0,+,1,\times)$ dans
l'anneau $(\mathbb Z,0,+,1,\times)$.

\begin{proposition}
  La fonction
  \[\begin{array}{ccccc}
  \iota & : & \mathbb N & \longrightarrow & \mathbb Z\\
  & & n & \longmapsto & \overline{(n,0)}
  \end{array}\]
  est un morphisme d'anneau injectif.
\end{proposition}

\begin{proof}
  On vérifie chaque axiome~:
  \begin{itemize}
  \item pour tous $n,m\in\mathbb N$~:
    \begin{align*}
      \iota(n) + \iota(m) &= \overline{(n,0)} + \overline{(m,0)}\\
      &= \overline{(n+m,0+0)}\\
      &= \iota(n+m)
    \end{align*}
  \item pour tous $n,m\in\mathbb N$~:
    \begin{align*}
      \iota(n)\times \iota(m) &= \overline{(n,0)} \times \overline{(m,0)}\\
      &= \overline{(n \times m + 0, 0 + 0)}
      &= \overline{(n\times m,0)}\\
      &= \iota(n+m)
    \end{align*}
  \item le neutre de l'anneau $\mathbb Z$ est $\overline{(1,0)}$, qui est bien
    $\iota(1)$.
  \item on vérifie que le noyau de $\iota$ est nul~: si $n\neq 0$ alors
    $\iota(n) \neq \overline{(0,0)}$ puisque $n + 0 \neq 0 + 0$, donc
    $(n,0)\nsim (0,0)$.
  \end{itemize}
  On en déduit que $\iota$ est un morphisme d'anneau injectif.
\end{proof}

Enfin, sur $\mathbb Z$, on peut caractériser les éléments comme des entiers
naturels ou des opposés d'entiers naturels.

\begin{proposition}
  Pour tout $k \in \mathbb Z$, il existe $n \in \mathbb N$ tel que soit
  $k = \iota(n)$, soit $k = (-\iota(1)) \times \iota(n)$, que l'on écrira
  plus rapidement $k = -n$ (respectivement $k = -n$).
\end{proposition}

\begin{proof}
  Soit $k \in \mathbb Z$. Par définition, on trouve $n,m\in\mathbb N$ tels que
  $k = \overline{(n,m)}$. Comme $\leq$ est total, on sait que soit
  $n \leq m$, soit $m \leq n$. Deux cas se présentent alors~:
  \begin{itemize}
  \item si $n \leq m$, alors $m = (m - n) + n$, donc $k = \overline{(0,m - n)}$,
    nous donnant $k = (-\iota(1))\times \iota(m-n)$.
  \item si $m \leq n$, alors $n = (n - m) + m$, donc
    $k = \overline{(n - m, 0)}$, nous donnant $k = \iota(n-m)$.
  \end{itemize}
  D'où le résultat.
\end{proof}

Passons maintenant à la construction générale sur un monoïde commutatif.

\begin{definition}
  Soit $(M,\star,e)$ un monoïde commutatif. On définit sur $M\times M$ muni des
  opérations coordonnée par coordonnée la congruence suivante~:
  \[(m,m') \sim (a,a') \defeq \exists k \in M, m \star a' \star k
  = m' \star a \star k\]

  On appelle symétrisé de $(M,\star,e)$ le groupe abélien obtenu à partir de
  $M\times M$ par quotient par $\sim$.
\end{definition}

\begin{proof}
  Montrons que $\sim$ est une congruence~:
  \begin{itemize}
  \item $\sim$ est réflexive~: pour $(m,m')$, on a
    $m \star m' \star e = m \star m' \star e$.
  \item $\sim$ est symétrique par symétrie de l'égalité.
  \item $\sim$ est transitive~: supposons qu'on a $(m,m')\sim (a,a')\sim(b,b')$
    et montrons qu'alors $(m,m')\sim (b,b')$. D'après les définitions, on trouve
    $k,k'\in M$ tels que
    \[\left\{\begin{array}{l}
    m \star a' \star k = m' \star a \star k\\
    a \star b' \star k' = a' \star b \star k'
    \end{array}\right.\]
    En \og additionnant\fg les deux lignes, on obtient
    \[m \star (a \star a' \star k \star k') \star b' =
    m' \star (a \star a' \star k \star k') \star b\]
    d'où le résultat en prenant $k'' = a \star a' \star k \star k'$.
  \item $\sim$ est une congruence~: supposons que $(m,m')\sim(a,a')$ et
    $(n,n')\sim(b,b')$, alors
    $(m\star n, m' \star n') \sim(a\star b,a'\star b')$. En effet, si on
    considère $k,k'\in M$ tels que
    \[\left\{\begin{array}{l}
    m \star a' \star k = m' \star a \star k\\
    n \star b' \star k' = n' \star b \star k'
    \end{array}\right.\]
    alors on obtient en \og additionnant\fg les deux lignes
    \[(m \star n) \star (a' \star b') \star (k \star k') =
    (m' \star n') \star (a \star b) \star (k \star k')\]
    nous donnant le résultat en prenant $k'' = k \star k'$.
  \end{itemize}
  On en déduit que $\sim$ est une congruence. Ainsi le symétrisé est un monoïde
  commutatif.

  Il nous reste à prouver que c'est un groupe. Soit $\overline{(m,m')}$ un
  élément du symétrisé. On définit son inverse par $\overline{(m',m)}$~:
  \[\overline{(m,m')}\star \overline{(m',m)} =
  \overline{(m\star m',m'\star m)}\]
  or $(m,m)\sim (e,e)$ assez directement, d'où le fait que leur produit vaut
  $\overline{(e,e)}$, le neutre du symétrisé.
\end{proof}

\begin{remark}
  On ajoute dans notre définition de $\sim$ un terme $k$~: celui-ci est
  nécessaire pour le cas où notre monoïde n'est pas régulier. On voit en effet
  que ce $k$ absorbe le terme $a \star a'$ pour la transitivité.
\end{remark}

\begin{exercise}
  Soit $M$ un monoïde commutatif et $A$ son symétrisé. Montrer que la fonction
  \[\begin{array}{ccccc}
  \iota & : & M & \longrightarrow & A\\
  & & m & \longmapsto & \overline{(m,e)}
  \end{array}\]
  est un morphisme de monoïde.
\end{exercise}

\begin{exercise}
  Soit $M$ un monoïde commutatif et $A$ son symétrisé. Montrer que pour tout
  groupe $G$ et tout morphisme de monoïde $f : M \to G$ il existe un unique
  morphisme de groupe $\hat f : A \to G$, ce que l'on peut représenter par le
  fait que tout diagramme comme suit peut être complété en un diagramme
  commutatif~:
  \begin{center}
    \begin{tikzcd}
      M \ar[r,"f"]\ar[d,"\iota"] & G\\
      A \ar[ur,"\hat f",dashed]
    \end{tikzcd}
  \end{center}
\end{exercise}

\subsection{Les nombres rationnels}

Nous avons vu comment construire les nombres entiers en tant que cas particulier
de symétrisation~: $\mathbb Z$ est $\mathbb N$ auquel on a ajouté des inverses
pour la loi $+$. Pour le cas de $\mathbb Q$, on va montrer qu'on peut construire
cet ensemble comme cas particulier du procédé dit de localisation, qui permet
d'inverser pour la loi $\times$ dans un anneau. Comme précédemment, on commence
par construire le cas particulier de $\mathbb Q$ et sa structure de corps avant
d'étudier le cas plus général de la localisation.

Si la construction de $\mathbb Z$ peut paraitre assez difficile à visualiser
au début, celle de $\mathbb Q$ sera au contraire très naturelle~: elle
consiste simplement à étudier les fractions. On sait en effet manipuler les
fractions comme des \og couples\fg de la forme $\dfrac{p}{q}$ où plusieurs
règles nous permettent de transformer un couple en un autre. Ces règles peuvent
se synthétiser en
\[\frac{p}{q} = \frac{p'}{q'} \defeq p\times q' = p' \times q\]

\'A partir de là, le procédé est très similaire au précédent~: on considère cela
comme une relation d'équivalence sur des couples, et on en déduit la
construction du corps des fractions.

\begin{definition}
  On définit la relation d'équivalence $\sim$ sur
  $\mathbb Z \times (\mathbb N\setminus\{0\})$ par~:
  \[(p,q) \sim (p',q') \defeq p\times q' = p'\times q\]
\end{definition}

\begin{proof}
  On vérifie que cela définit bien une relation d'équivalence~:
  \begin{itemize}
  \item pour tout $(p,q)$, $p\times q = p \times q$ donc $(p,q)\sim(p,q)$.
  \item pour tous $(p,q)\sim (p',q')$, la symétrie de l'égalité nous fait
    déduire que $(p',q')\sim(p,q)$.
  \item si $(p,q)\sim(p',q')\sim(p'',q'')$, alors on sait que
    \[\left\{\begin{array}{l}
    p\times q' = p' \times q\\
    p' \times q'' = p'' \times q'
    \end{array}\right.\]
    si l'un des nombres parmi $p,p',p''$ est nul, alors tous les autres le sont
    (puisque $q,q',q''$ sont tous les trois non nuls). On en déduit donc qu'on
    peut simplifier (puisque $\mathbb Z$ est un anneau intègre) le produit des
    deux lignes par $q'\times p'$, nous donnant~:
    \[p\times q'' = p'' \times q\]
    donc $(p,q)\sim(p'',q'')$.
  \end{itemize}
  Donc $\sim$ est une relation d'équivalence.
\end{proof}

\begin{exercise}\label{exo.ax.Qring}
  Montrer qu'on peut munir $\mathbb Z\times (\mathbb N\setminus\{0\})$ d'une
  structure d'anneau en définissant les opérations
  \[(p,q)+(p',q') \defeq (p\times q' + p' \times q, q\times q')\qquad
  (p,q)\times(p',q')\defeq (p\times p',q\times q')\]
\end{exercise}

Cette structure passe au quotient par $\sim$, ce qui nous donnera la structure
souhaitée pour $\mathbb Q$.

\begin{proposition}
  La relation $\sim$ est une congruence pour les deux opérations définies dans
  l'\cref{exo.ax.Qring}.
\end{proposition}

\begin{proof}
  Soient $(p,q)\sim(p',q')$ et $(r,s)\sim(r',s')$, montrons les deux relations
  \[(p\times s + q\times r, q \times s) \sim
  (p'\times s' + q'\times r',q'\times s')\qquad
  (p\times r, q\times s)\sim(p'\times r', q'\times s')\]
  la seconde relation est la plus facile à montrer~: cela revient à l'égalité
  \[p\times r \times q' \times s' = q\times s \times p' \times r'\]
  mais on sait que $p\times q' = p' \times q$ et que
  $r \times s' = t' \times s$, ce qui nous donne directement le résultat en
  multipliant les deux égalités entre elles.

  Pour la première relation, celle-ci revient à montrer l'égalité
  \[(p\times s + q \times r)\times q' \times s' =
  (p'\times s' + q' \times r')\times q \times s\]
  ce qui, par distributivité, donne
  \[p\times q' \times s \times s' + r \times q \times q' \times s' =
  p'\times q \times s \times s' + r' \times q \times q' \times s\]
  or $p\times q' = p' \times q$ et $r\times s' = r' \times s$, donnant le
  résultat en multipliant les équations respectivement par $s\times s'$ et par
  $q\times q'$, puis en les additionnant.
\end{proof}

\begin{notation}
  On notera $p/q$ ou $\dfrac{p}{q}$ pour noter $\overline{(p,q)}$.
\end{notation}

On peut donc définir $\mathbb Q$~: c'est l'anneau quotient obtenu à partir de
$\sim$. On montre maintenant que cet anneau est un corps.

\begin{proposition}
  $(\mathbb Q,0,+,1,\times)$ est un corps.
\end{proposition}

\begin{proof}
  On a déjà prouvé qu'on avait un anneau commutatif, il nous reste à montrer que
  c'est un corps. Pour cela, soit $p/q\in\mathbb Q$ non nul. Cela signifie en
  particulier que $p \neq 0$. Si $p > 0$, alors on définit l'inverse
  de $p/q$ par $q/p$, et on voit que
  \[\frac{p}{q}\times\frac{p}{q} = \frac{pq}{pq} = 1\]
  Si $p < 0$, alors on définit l'inverse de $p/q$ par $(-p)/(-q)$, et on
  trouve alors
  \[\frac{p}{q}\times\frac{-p}{-q} = \frac{-pq}{-pq} = 1\]

  Dans les deux cas, si $r\in \mathbb Q$ est non nul, alors il est inversible
  pour $\times$.
\end{proof}

\begin{exercise}
  Montrer que la fonction
  \[\begin{array}{ccccc}
  \iota &: & \mathbb Z & \longrightarrow & \mathbb Q \\
  & & k & \longmapsto & \frac{k}{1}
  \end{array}\]
  est un morphisme d'anneau injectif.
\end{exercise}

Ainsi $\mathbb Q$ peut se voir comme le plus petit corps contenant $\mathbb Z$,
voire comme le plus petit corps contenant $\mathbb N$.

On passe maintenant au cas général. Tout d'abord, on peut voir que la
construction ne demande, pour être effectuée, que d'avoir une partie stable
par $\times$ dans $\mathbb Z$. Si l'on imagine prendre l'ensemble
$\{2^n\mid n \in \mathbb N\}$, par exemple, on peut vérifier que la
construction précédente donne encore une structure, qui ne sera cependant pas
un corps~: ce sera un anneau contenant $\mathbb Z$ dans lequel chaque élément
de $\{2^n \mid n \in \mathbb N\}$ devient inversible. C'est ce procédé qu'on
appelle localisation.

\begin{definition}
  Soit $A$ un anneau commutatif intègre. On considère une partie $S\subseteq A$
  close par produit, c'est-à-dire telle que
  \[\forall x,y\in S, x \times y \in S\]
  On définit la relation $\sim_S$ sur $A\times S$ par
  \[(a,s) \sim (a',s') \defeq a\times s' = a' \times s\]
\end{definition}

\begin{proposition}
  $\sim_S$ est une congruence pour les opérations
  \[(a,s)+(a',s') \defeq (a\times s' + a' \times s, s\times s')\qquad
  (a,s)\times (a',s') \defeq (a\times a',s\times s')\]
\end{proposition}

\begin{proof}
  On montre les différents axiomes~:
  \begin{itemize}
  \item pour tout $(a,s)$, on a $a\times s = a \times s$ donc $(a,s)\sim(a,s)$.
  \item la symétrie vient de celle de l'égalité.
  \item si $(a,s)\sim(a',s')\sim(a'',s'')$, alors $(a,s)\sim(a'',s'')$. En
    effet, l'hypothèse nous dit que
    \[\left\{\begin{array}{l}
    a \times s' = a' \times s\\
    a' \times s'' = a'' \times s'
    \end{array}\right.\]
    d'où, en multipliant les deux lignes~:
    \[a\times (s'\times a') \times s'' = a''\times (s'\times a') \times s\]
    si l'un parmi $a,a',a''$ est nul, les trois sont nuls et le résultat est
    direct. Sinon, par intégrité, on peut simplifier la multiplication par
    $s'\times a'$, nous donnant $a\times s'' = a'' \times s$, donc
    $(a,s) \sim (a'',s'')$.
  \item si $(a,s)\sim(a',s')$ et $(b,t)\sim(b',t')$, pour montrer que
    $(a,s)\times(b,t)\sim (a',s')\times (b',t')$, il nous faut montrer
    l'égalité
    \[(a\times t + b \times s)\times s' \times t' =
    (a'\times t' + b' \times s')\times s \times t\]
    et le raisonnement donné plus tôt dans le cas de $\mathbb Q$ fonctionne
    encore.
  \item si $(a,s)\sim(a',s')$ et $(b,t)\sim(b',t')$, on veut montrer que
    \[a\times b \times s' \times t' = a' \times b' \times s \times t\]
    ce qui se déduit directement des hypothèses.
  \end{itemize}
  Ainsi $\sim$ est bien une congruence pour les opérations considérées.
\end{proof}

On peut alors montrer que $A/\sim$, qu'on note en général $S^{-1}A$, contient
$A$ et des inverses pour chaque élément de $S$. En réalité, on peut construire
la localisation sans avoir l'intégrité, en prenant une définition analogue à
celle où on ajoute $k$ dans la définition de la symétrisation.

\subsection{Les nombres réels}

Nous abordons notre dernière construction avec celle des réels. Il existe deux
constructions classiques de $\mathbb R$~: celle par suites de Cauchy et celle
par coupures de Dedekind. Comme nous avons abordé la complétion dans le cadre
général dans le \cref{chp.topo}, nous allons étudier ici la construction par
les coupures de Dedekind, qui se base sur la structure ordonnée de $\mathbb Q$.

La relation $\leq$, en effet, peut s'étendre de $\mathbb N$ à $\mathbb Z$ puis
à $\mathbb Q$, conférant à $\mathbb Q$ une structure de corps ordonné. Il nous
faut donc commencer par donner les définitions d'ordre sur $\mathbb Z$ et
$\mathbb Q$~:

\begin{definition}
  On définit sur $\mathbb Z$ la relation $\leq$ par~:
  \[a \leq b \defeq b - a \in \mathbb N\]
  où $\mathbb N$ est identifié à $\iota(\mathbb N) \subseteq \mathbb Z$.
\end{definition}

\begin{exercise}
  Montrer que $\leq$ est une relation d'ordre totale compatible avec l'addition,
  c'est-à-dire que pour tous $a\leq b$ et $c\leq d$, on a $a+c\leq b+d$.
  Montrer de plus que si $a \geq 0$ et $b\geq 0$ alors $a\times b \geq 0$.
  La structure $(\mathbb Z,0,+,1,\times,\leq)$ est alors appelée un anneau
  totalement ordonné.
\end{exercise}

\begin{definition}
  On définit la partie de $\mathbb Q$ suivante~:
  \[\mathbb Q_+ \defeq \left\{\frac{p}{q}\mid p,q\in \mathbb N\right\}\]
  On définit alors la relatoin $\leq$ sur $\mathbb Q$ par~:
  \[r \leq s \defeq s - r \in \mathbb Q_+\]
\end{definition}

\begin{exercise}
  Montrer que $(\mathbb Q,0,+,1,\times,\leq)$ est un aussi un anneau totalement
  ordonné. On dit alors que c'est un corps totalement ordonné.
\end{exercise}

De plus, toutes ces structures ordonnées ont la propriété d'être archimédienne,
ce qui signifie que $\mathbb Z$ et $\mathbb Q$ vérifient la proposition
suivante~:
\[\forall k\in A, \exists n \in\mathbb N, n \geq k\]

On veut désormais compléter $\mathbb Q$, ce qui signifie moralement qu'on veut
supprimer tous les trous que contient cet ensemble. Dans le contexte des suites
de Cauchy, cela signifie qu'on veut qu'une suite de Cauchy, devant converger en
terme d'à quel point ses points se rapprochent, doit converger effectivement
vers un point donné. Dans le contexte de l'ordre, la notion naturelle de limite
est celle de borne supérieure ou inférieure. On peut voir cela par exemple avec
l'intervalle $(0,1)$~: il ne contient ni $0$ ni $1$, mais on pense à $1$ comme à
un point limite de l'intervalle. Pour une suite croissante, d'ailleurs, la
limite coïncide avec la borne supérieure (dans $\mathbb R$).

On souhaite donc ajouter à notre ensemble $\mathbb Q$ toutes les bornes
supérieures de parties de $\mathbb Q$. Une construction générale de théorie des
ordres existe pour cela~: c'est la complétion idéale. Elle consiste à étudier,
à la place d'un ensemble ordonné $(X,\leq)$, l'ensemble $\mathcal I(X)$ de ses
idéaux muni de l'inclusion. La construction des coupures de Dedekind est très
proche, mais considère au lieu des idéaux des paires $(L,U)$ d'un idéal et d'un
filtre. Dans notre cas, nous allons traiter le cas général de la complétion
idéale plutôt que la version historique des coupures de Dedekind.

Notre présentation sera un entre deux~: nous donnons une construction
similaire à celle de la complétion idéale pour les ordres partiels complets,
mais nous nous plaçons directement dans le cadre des ordres totaux. On parle
donc d'ordre total complet, et on considère une variante qui nous rapproche
directement de la propriété de la borne supérieure, qu'on veut vérifier dans
$\mathbb R$.

\begin{definition}[Ordre total complet]
  On dit qu'un ensemble totalement ordonné $(X,\leq)$ est complet si toute
  partie non vide majorée admet une borne supérieure et toute partie minorée
  non vide admet une borne inférieure.
\end{definition}

Notre objectif est donc, à partir de $(\mathbb Q,\leq)$, de construire
l'ensemble ordonné $(\mathbb R,\leq)$ qui est complet et contient, en un sens,
$\mathbb Q$. On veut donc \og ajouter les bornes supérieures\fg de $\mathbb Q$,
les bornes inférieures en étant conséquences du fait que $x\mapsto -x$ envoie
les bornes supérieures sur les bornes inférieures et inversement (on le verra
après notre construction).

Partons d'une remarque essentielle~: les bornes supérieures existent toujours
quand on étudie des ensembles d'ensembles, grâce à l'union. Cela nous motive à
plonger $\mathbb Q$ dans un ensemble d'ensembles. En l'occurrence, il existe une
façon assez naturelle d'associer une partie de $\mathbb Q$ à un rationnel $r$~:
il suffit de considérer l'ensemble $\{r' \in \mathbb Q \mid r' \leq r\}$. Cette
association tient compte de l'ordre, ce qui est souhaité vu notre objectif.

On veut donc caractériser les parties qui se comportent comme celle définie plus
haut. Une propriété évidente est qu'une telle partie est close par le bas, par
transitivité d el'ordre $\leq$. Une telle partie est aussi non vide, dans le cas
de $\mathbb Q$, puisque $\mathbb Q$ n'est pas minoré. Elle n'est pas non plus
l'ensemble tout entier. Ces conditions sont exactement celles définissant un
idéal dans un ensemble totalement ordonné (car la propriété à propos de $\land$
est alors automatiquement vérifiée), et ne pas être $\mathbb Q$ signifie être un
idéal propre.

Cependant, on voit que deux idéaux peuvent sembler coder le même rationnel~:
$\{q < 2\}$ et $\{q \leq 2\}$ sont des idéaux et ont la même borne supérieure,
ce qui est un problème dans notre cas. Pour arranger cela, on ajoute qu'une
partie ayant une borne supérieure doit la contenir.

\begin{definition}[Complétion idéale]
  Soit $(X,\leq)$ un ensemble totalement ordonné. On appelle complétion idéale
  l'ensemble $\ideal(X)\subseteq \powerset(X)$ défini par le fait que
  $Y\in \ideal(X)$ si et seulement si~:
  \begin{itemize}
  \item pour tout $x,y\in X$, si $x\leq y$ et $y \in Y$ alors $x\in Y$.
  \item $Y\neq \varnothing$
  \item $Y\neq X$
  \item si $\bigvee Y$ existe, alors $\bigvee Y \in Y$.
  \end{itemize}
  muni de l'inclusion comme ordre.
\end{definition}

\begin{remark}
  On aurait aussi pu caractériser cet ensemble comme l'ensemble des idéaux de
  $X$ fermés pour la topologie de l'ordre, qui est la topologie engendrée par
  les intervalles ouverts, c'est-à-dire de la forme $\{x \in X\mid y < x < z\}$
  pour $y,z\in X$.
\end{remark}

On peut alors montrer que $(\ideal(X),\subseteq)$ est un ordre total complet.

\begin{proposition}
  Soit $(X,\leq)$ un ordre totalement ordonné non majoré. Alors
  $(\ideal(X),\subseteq)$ est un ordre total complet.
\end{proposition}

\begin{proof}
  On souhaite d'abord montrer que cet ordre est total. Soient $Y,Z\in\ideal(X)$,
  $Y\neq Z$. Par définition, on trouve $x\in Y\Delta Z$. Par symétrie du rôle de
  $Y$ et $Z$, on suppose sans perte de généralité que $x\in Y$. Alors pour tout
  $z\in Z$, si $x \leq z$ on aurait $x\in Z$ puisque $Z$ est clos par le bas.
  Donc, comme $x\in Y\setminus Z$, on en déduit que $x \leq z$ est faux. Comme
  l'ordre est total, on en déduit que $z\leq x$, donc par clôture par le bas de
  $Y$ que $z\in Y$. En conclusion, $Z\subseteq Y$, donc l'ordre est total.

  Soit maintenant une partie $A\subseteq \ideal(X)$ non vide majorée, on
  construit la borne supérieure de $A$ en deux temps. On pose d'abord
  $B = \bigcup A$. Si $B$ admet une borne supérieure (dans $X$), alors on
  considère comme borne supérieure de $A$ l'ensemble $B \cup\{\bigvee B\}$,
  sinon on considère simplement $B$. On note cet ensemble $C$. On vérifie que
  $C\in \ideal(X)$~:
  \begin{itemize}
  \item soient $x,y\in X$ tels que $x < y$ et $y\in C$. Si $y = \bigvee B$,
    alors comme $x < \bigvee B$, on en déduit qu'il existe $z \in B$ tel que
    $x < z$, et par définition de $z\in B$ on trouve $Z\in A$ tel que $z\in Z$,
    donc $x \in Z$, donc $x \in B$. Si $y \in B$, alors on trouve $Z\in A$ tel
    que $y \in Z$ et on en déduit que $x\in Z$, donc que $x \in B$.
  \item comme $A\neq \varnothing$, on trouve $Y\in A$, et $Y\neq\varnothing$
    donc on trouve $y\in Y$, on en déduit que $y\in C$, donc que
    $C\neq\varnothing$.
  \item comme $A$ est majorée, on trouve $Y \in \ideal(X)$ tel que pour tout
    $Z\in C$, $Z\subseteq Y$. Comme $Y\neq X$, on trouve $x\in X\setminus Y$,
    et par totalité de $\leq$ on en déduit que $x$ est un majorant de $Y$, c'est
    de plus un majorant strict puisque la borne supérieure de $Y$ doit
    appartenir à $Y$. On remarque que $C\subseteq Y$, donc $x\notin C$, donc
    $C\neq X$.
  \item si $\bigvee C$ existe, alors par construction c'est $\bigvee B$ qui est
    un élément de $C$.
  \end{itemize}
  Donc $C\in\ideal(X)$.

  On montre maintenant que c'est la borne supérieure de $A$~:
  \begin{itemize}
  \item $C$ contient l'union de $A$ donc pour tout $Y\in A, Y\subseteq C$.
  \item supposons que pour tout $Y\in A, Y\subseteq Z$ pour un certain
    $Z\in \ideal(X)$. Alors $B\subseteq Z$, il nous faut donc montrer que si
    $\bigvee B$ existe alors $\bigvee B \in Z$. Supposons que cet élément
    existe et qu'il n'appartient pas à $Z$. Alors il est un majorant de $Z$.
    Soit $z$ un autre majorant de $Z$, alors si $z < \bigvee B$, on en déduit
    qu'il existe $Y\in A$ tel que $z\in Y$, donc $z \in Z$, donc $z$ est le
    maximum de $Z$, qui est une borne supérieure~: on en déduit que
    $\bigvee B = z$, donc que $\bigvee B \in Z$, ce qui est absurde. Ainsi
    $\bigvee B \in Z$, donc $C\subseteq Z$.
  \end{itemize}
  Ainsi $C$ est le plus petit majorant de $A$, donc $C$ est la borne supérieure
  de $A$ dans $(\ideal(X),\subseteq)$.

  Le cas des bornes inférieures est laissé en exercice.
\end{proof}

\begin{exercise}
  Montrer qu'une partie minorée non vide $A$ possède une borne inférieure dans
  $(\ideal(X),\subseteq)$. \textit{Indication~:} on considère comme candidat de
  cette borne inféreure de $A$ l'ensemble $\bigcap A$.
\end{exercise}

\begin{remark}
  On peut noter la différence de traitement de la borne supérieure de l'idéal
  entre l'intersection et l'union. La raison à cela peut s'interpréter de façon
  topologique~: nous imposons à nos idéaux d'être des fermés, donc considérer
  l'union nous demande de prendre ensuite l'adhérence (qui correspond dans notre
  cas à ajouter la borne supérieure) là où la stabilité par intersection est
  assurée. Une autre asymétrie est donnée par le fait que les idéaux considèrent
\end{remark}

On veut aussi montrer que $\ideal(X)$ est un prolongement, en un sens, naturel,
de $X$. Cela se traduit par deux faits~: on peut plonger $X$ dans $\ideal(X)$,
et $\ideal(X)$ est le plus petit ensemble contenant $X$ et étant stable par
sups de parties bornées non vides.

\begin{proposition}
  Soit $(X,\leq)$ un ensemble totalement ordonné non majoré. La fonction
  \[\begin{array}{ccccc}
  \iota & : & X & \longrightarrow & \ideal(X)\\
  & & x &\mapsto & \{y \in X \mid y \leq x\}
  \end{array}\]
  est une fonction strictement croissante.
\end{proposition}

\begin{proof}
  Montrons d'abord que la fonction est bien définie, c'est-à-dire que pour tout
  $x\in X$, $\iota(x)$ est bien un élément de $\ideal(X)$~:
  \begin{itemize}
  \item si $y,z\in X$ tels que $y\leq z$ et $z\in \iota(x)$, alors $z \leq x$
    donc $y\leq x$ par transitivité, donc $y\in \iota(x)$.
  \item $x\in\iota(x)$ donc $\iota(x)\neq\varnothing$.
  \item $X$ n'est pas majoré, donc on trouve $y > x$, ce qui signifie que
    $y\notin\iota(x)$, donc $\iota(x)\neq X$.
  \item $\bigvee\iota(x) = x$ et $x\in\iota(x)$ donc la borne supérieure  de
    $\iota(x)$ existe et appartient bien à $\iota(x)$.
  \end{itemize}
  On en déduit que $\iota$ est bien définie.

  Si $x < y$ alors pour tout $z \in \iota(x)$, $z \leq x$ donc par transitivité
  $z \leq y$, donc $z \in \iota(y)$. De plus, $y\notin\iota(x)$ et
  $y\in\iota(y)$ donc $\iota(x)\subsetneq\iota(y)$. $\iota$ est donc strictement
  croissante.
\end{proof}

\begin{remark}
  On peut utiliser ce résultat pour prouver que $\ideal(X)$ n'est pas majoré.
  En effet, s'il l'était, alors son majorant contiendrait tous les $\iota(x)$
  pour $x\in X$, donc tout $X$, ce qui n'est pas possible. En réalité, on
  pourrait simplement considérer l'ensemble des idéaux et non l'ensemble des
  idéaux propres (un idéal est propre s'il est différent de $X$), mais dans
  notre construction de $\mathbb R$ cela introduirait un point à l'infini.
\end{remark}

\begin{lemma}\label{lem.id.cup}
  Soit $(X,\leq)$ un ensemble totalement ordonné. Alors pour tout
  $Y\in\ideal(X)$, on a l'égalité
  \[Y = \bigcup_{x\in Y} \iota(x)\]
\end{lemma}

\begin{proof}
  On prouve ce résultat par double inclusion~:
  \begin{itemize}
  \item pour tout $x\in Y$, comme $Y$ est clos par le bas,
    $\iota(x)\subseteq Y$, donc
    $\displaystyle\bigcup_{x\in Y}\iota(x)\subseteq Y$.
  \item on sait que $x\in \iota(x)$, donc pour tout $x\in Y$,
    $\displaystyle x\in \bigcup_{x\in Y} \iota(x)$.
  \end{itemize}
  D'où le résultat par double inclusion.
\end{proof}

\begin{theorem}[Propriété universelle de la complétion idéale]
  Soit $(X,\leq)$ un ensemble totalement ordonné non majoré. Soit $(Y,\leq)$
  un ensemble totalement ordonné complet et $f : X \to Y$ une fonction
  croissante préservant les bornes inférieures et supérieures. Il existe une
  unique fonction $\hat f : \ideal(X) \to Y$ qui préserve les bornes supérieures
  et les bornes inférieures et telle que $f = \hat f \circ \iota$.
\end{theorem}

\begin{proof}
  On procède par analyse-synthèse~:
  \begin{itemize}
  \item si une telle fonction $\hat f$ existe, alors par définition, on sait
    que pour tout $x\in X$, $\hat f(\iota(x)) = f(x)$. De plus, par le
    \cref{lem.id.cup}, on sait que pour tout $Y\in \iota(x)$,
    $\displaystyle Y = \bigcup_{x\in Y} \iota(x)$, donc par préservation des
    bornes supérieures on en déduit que
    \[\hat f(Y) = \bigvee_{x\in Y} f(x)\]
    ce qui définit de façon unique $\hat f$.
  \item Montrons que notre candidat $\hat f$ est une fonction croissante qui
    préserve les bornes supérieures et inférieures~:
    \begin{itemize}
    \item Tout d'abord, si
      $Y\subseteq Z$, comme la borne supérieure est croissante pour l'inclusion,
      on en déduit que $\bigvee f(Y) \leq \bigvee f(Z)$, d'où
      $\hat f(Y)\leq \hat f(Z)$.
      
    \item Soit $A\subseteq \ideal(X)$ admettant une borne supérieure, qu'on note
      $a$. On a vu que cette borne supérieure est $\bigcup A$, en ajoutant si
      nécessaire la borne supérieure (dans $X$) de $\bigcup A$, ce qui nous
      donne donc
      \[\hat f(a) = \bigvee_{x \in a} f(x)\]
      on veut montrer que cette valeur est la borne supérieure de $\hat f(A)$.
      Comme la borne supérieure est croissante vis à vis de l'inclusion, on sait
      déjà que $\hat f(a)$ est un majorant de $\hat f(A)$.
      Soit $b$ un majorant de $\hat f(A)$, cela signifie que pour tout
      $Y\in A, \bigvee_{x \in Y} f(x) \leq b$, donc pour tout
      $x \in \bigcup A, f(x) \leq b$. Il nous reste donc, si $\bigvee a$ existe,
      à montrer que $f(\bigvee a) \leq b$. Mais cela est dû au fait que $f$
      préserve les bornes supérieures.
    \item Le cas de la borne inférieure est laissé en exercice.
    \end{itemize}
  \end{itemize}
  Ainsi il existe une unique fonction $\hat f$ vérifiant les conditions
  imposées.
\end{proof}

\begin{exercise}
  Montrer que $\hat f$ préserve bien les bornes inférieures.
\end{exercise}

\begin{remark}
  On peut représenter la propriété précédente par le fait qu'il existe une
  unique flèche $\hat f$ faisant commuter le diagramme suivant~:
  \begin{center}
    \begin{tikzcd}
      X \ar[r,"f"]\ar[d,"\iota"] & Y\\
      \ideal(X) \ar[ur,dashed,"\hat f"]
    \end{tikzcd}
  \end{center}
\end{remark}

On peut donc construire l'ensemble ordonné $(\mathbb R,\leq)$, mais nous
souhaitons aussi définir les opérations sur cet ensemble. Pour l'addition, nous
avons besoin d'un simple lemme car l'addition est compatible avec l'ordre de
$\mathbb Q$.

\begin{lemma}\label{lem.R.compat}
  Soit $(X,+,\leq)$ un groupe abélien où $+$ est compatible avec
  $\leq$. Alors l'ensemble ordonné $(\ideal(X),\subseteq)$ peut être muni de
  la loi de composition interne $+$ définie par~:
  \[Y + Z \defeq \{y + z \mid y \in Y, z \in Z\}\]
  et $(\ideal(X),+,\subseteq)$ est alors un groupe abélien et $+$ est compatible
  avec $\subseteq$.
\end{lemma}

\begin{proof}
  Soient $Y,Z\in \ideal(X)$, montrons que $Y + Z \in \ideal(X)$~:
  \begin{itemize}
  \item soient $x,x'\in X$ tels que $x\leq x'$ et $x\in Y + Z$. Par définition,
    on trouve $y\in Y,z \in Z$ tels que $x' = y + z$. Comme $x \leq y + z$, on
    en déduit que $x - z \leq y$ par compatibilité de $+$ avec $\leq$, et comme
    $Y$ est clos par le bas, $x - z \in Y$, donc $x - z + z \in Y + Z$, et
    $x - z + z = x$, donc $x \in Y + Z$.
  \item comme $Y$ et $Z$ sont non vides, on trouve $y\in Y$ et $z\in Z$. Comme
    $y + z \in Y + Z$, $Y + Z \neq \varnothing$.
  \item on trouve $y\notin Y$ et $z\notin Z$~: si $y + z \in Y + Z$ alors
    A FAIRE
  \item A FAIRE
  \end{itemize}

  On vérifie maintenant qu'on a un groupe abélien~:
  \begin{itemize}
  \item pour tous $Y,Z,A\in\ideal(X)$, on a
    \begin{align*}
      Y + (Z + A) &= \{ y + (z + a) \mid y \in Y, z \in Z, a \in A\}\\
      &= \{ (y + z) + a \mid y \in Y, z \in Z, a \in A\}\\
      &= (Y + Z) + A
    \end{align*}
  \item en notant $0$ le neutre de $X$, on a pour tout $Y \in \ideal(X)$~:
    \begin{align*}
      Y + \iota(0) &= \{ y + 0 \mid y \in Y \}\\
      &= \{y \mid y \in Y \}\\
      &= Y
    \end{align*}
  \item pour tout $Y\in \ideal(X)$, on définit
    \[-Y \defeq X \setminus \{ - y \mid y \in Y\}\]
    augmenté si besoin de sa borne supérieure. C'est un élément de $\ideal(X)$~:
    \begin{itemize}
    \item si $x,y \in X$, $x\leq y$ et $y \in -Y$, alors on sait que
      $-y\notin Y$, et $-y \leq -x$. Si $-x \in Y$, alors $-y \in Y$ par cloture
      par le bas, donc on en déduit que $-x \notin Y$, donc $x \in -Y$.
    \item comme $Y \neq X$, on trouve $y\notin Y$, et alors $-y \in -Y$, donc
      $-Y\neq \varnothing$.
    \item comme $Y \neq \varnothing$, on trouve $y\in Y$, et alors
      $-y \notin -Y$, donc $-Y\neq X$.
    \item ajouter la borne supérieure si elle existe assure la dernière
      condition.
    \end{itemize}
    On montre alors que pour tout $Y \in \ideal(X)$, on a
    $Y + (-Y) = \iota(0)$. A FAIRE
  \item enfin, $+$ est commutatif~: pour tout $Y,Z \in \ideal(X)$, on a~:
    \begin{align*}
      Y + Z &= \{ y + z \mid y \in Y, z \in Z \}\\
      &= \{ z + y \mid z \in Z, y \in Y \}\\
      &= Z + Y
    \end{align*}
  \end{itemize}
  Ainsi $(\ideal(X),+,\subseteq)$ est un groupe abélien ordonné.
\end{proof}

On peut donc utiliser ce fait pour munir $\mathbb R$ de la loi $+$. Cependant,
pour la loi $\times$, cela pose un problème~: $\times$ n'est pas compatible avec
$\leq$ dans $\mathbb Q$. Pour contourner ce problème, on peut définir d'abord
$\times$ sur $\mathbb R_+^\star$~: la loi $\times$ est en effet compatible
avec $\leq$ sur $\mathbb Q_+^\star$ et donne un groupe.

\begin{definition}[Ensemble des réels]
  On définit $(\mathbb R,+,\leq)$ comme la complétion idéale de $\mathbb Q$.
  On définit de plus $(\mathbb R_+^\star,\times, \leq)$ comme la complétion
  idéale de $(\mathbb Q_+^\star,\times)$.
\end{definition}

\begin{remark}
  Ces constructions peuvent être définies grâce au fait que $\mathbb Q$ et
  $\mathbb Q_+^\star$ sont non majorés.
\end{remark}

\begin{definition}[Produit de réels]
  On définit maintenant le produit de nombres réels par
  \[x \times y \defeq \left\{\begin{array}{l}
  0 \text{ si } x = 0 \lor y = 0 \\
  x \times_{\mathbb Q_+^\star} y \text{ si } x > 0 \land y > 0\\
  - (x \times_{\mathbb Q_+^\star} (-y)) \text{ si } x > 0 \land y < 0\\
  - ((-x) \times_{\mathbb Q_+^\star} y) \text{ si } x < 0 \land y > 0\\
  - ((-x) \times_{\mathbb Q_+^\star} (-y)) \text{ si } x < 0 \land y < 0
  \end{array}\right.\]
\end{definition}

\begin{exercise}
  Montrer que $(\mathbb R,+,\times,\leq)$ est un corps totalement ordonné.
\end{exercise}

\begin{corollary}
  Toute partie non vide majorée (respectivement, minorée) de $\mathbb R$ admet
  une borne supérieure (respectivement, inférieure).
\end{corollary}

\begin{remark}
  On aurait pu, au lieu de faire cette disjonction de cas, construire nos
  ensembles de nombres dans un ordre plus efficace en vu de la construction par
  complétion idéale. En construisant $\mathbb N$, puis $\mathbb Q_+$ (en
  inversant $\times$ dans $\mathbb N^\star$), on peut directement considérer le
  demi-anneau $(\mathbb R,+,\times,\leq)$ complet, puis le symétriser pour la
  loi $+$ pour obtenir un corps totalement ordonné complet.

  Cette construction, cependant, demande d'affiner le \cref{lem.R.compat} pour
  le cas d'un monoïde régulier, puisque $(\mathbb Q_+,+)$ n'a pas une structure
  de groupe.
\end{remark}

\begin{remark}
  L'autre construction de $\mathbb R$ n'exige pas de construction
  \textit{ad hoc} comme la disjonction de cas précédente. Elle utilise la
  complétion par les suites de Cauchy~: il se trouve que si $(A,+,\times)$ est
  un anneau, alors les suites à valeurs dans $A$ ont naturellement une structure
  d'anneau en considérant les opérations termes à termes. L'ensemble des suites
  de Cauchy de limite nulle est alors un idéal de cet anneau~: on peut donc
  directement construire l'anneau quotient. Cette construction de $\mathbb R$
  est plus directe et plus naturelle depuis $\mathbb Q$, mais nous souhaitions
  traiter de cette autre construction que sont les coupures de Dedekind (dans
  une version éloignée de la construction historique).
\end{remark}
